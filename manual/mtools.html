<html lang="en">
<head>
<title>Mtools 4.0.18</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Mtools 4.0.18">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="top" href="#Top">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
--></style>
</head>
<body>
This manual is for Mtools (version 4.0.18, January 2013),
which is a collection of tools to allow Unix systems to manipulate
MS-DOS files.

   <p>Copyright &copy; 2007, 2009 Free Software Foundation, Inc. 
Copyright &copy; 1996-2005,2007-2011,2013 Alain Knaff.

   <blockquote>
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts, and with no Back-Cover
Texts.  A copy of the license is included in the section entitled
&ldquo;GNU Free Documentation License&rdquo;. 
</blockquote>

<!-- Output the table contents at the beginning -->
   <div class="contents">
<h2>Table of Contents</h2>
<ul>
<li><a name="toc_Top" href="#Top">Mtools doc</a>
<li><a name="toc_Top" href="#Top">Introduction</a>
<li><a name="toc_Location" href="#Location">1 Where to get mtools</a>
<li><a name="toc_Common-features" href="#Common-features">2 Common features of all mtools commands</a>
<ul>
<li><a href="#arguments">2.1 Options and filenames</a>
<li><a href="#drive-letters">2.2 Drive letters</a>
<li><a href="#directory">2.3 Current working directory</a>
<li><a href="#long-names">2.4 VFAT-style long file names</a>
<li><a href="#name-clashes">2.5 Name clashes</a>
<li><a href="#case-sensitivity">2.6 Case sensitivity of the VFAT file system</a>
<li><a href="#high-capacity-formats">2.7 high capacity formats</a>
<ul>
<li><a href="#more-sectors">2.7.1 More sectors</a>
<li><a href="#bigger-sectors">2.7.2 Bigger sectors</a>
<li><a href="#2m">2.7.3 2m</a>
<li><a href="#XDF">2.7.4 XDF</a>
</li></ul>
<li><a href="#exit-codes">2.8 Exit codes</a>
<li><a href="#bugs">2.9 Bugs</a>
</li></ul>
<li><a name="toc_Configuration" href="#Configuration">3 How to configure mtools for your environment</a>
<ul>
<li><a href="#Configuration">3.1 Description</a>
<li><a href="#configuration-file-location">3.2 Location of the configuration files</a>
<ul>
<li><a href="#general-syntax">3.2.1 General configuration file syntax</a>
</li></ul>
<li><a href="#default-values">3.3 Default values</a>
<li><a href="#global-variables">3.4 Global variables</a>
<li><a href="#per-drive-variables">3.5 Per drive flags and variables</a>
<ul>
<li><a href="#general-information">3.5.1 General information</a>
<li><a href="#location-information">3.5.2 Location information</a>
<li><a href="#geometry-description">3.5.3 Disk Geometry Configuration</a>
<li><a href="#open-flags">3.5.4 Open Flags</a>
<li><a href="#miscellaneous-variables">3.5.5 General Purpose Drive Variables</a>
<li><a href="#miscellaneous-flags">3.5.6 General Purpose Drive Flags</a>
<li><a href="#multiple-descriptions">3.5.7 Supplying multiple descriptions for a drive</a>
</li></ul>
<li><a href="#parsing-order">3.6 Location of configuration files and parsing order</a>
<li><a href="#old-style-configuration">3.7 Backwards compatibility with old configuration file syntax</a>
</li></ul>
<li><a name="toc_Commands" href="#Commands">4 Command list</a>
<ul>
<li><a href="#floppyd">4.1 Floppyd</a>
<ul>
<li><a href="#floppyd">4.1.1 Authentication</a>
<li><a href="#floppyd">4.1.2 Command line options</a>
<li><a href="#floppyd">4.1.3 Connecting to floppyd</a>
<li><a href="#floppyd">4.1.4 Examples:</a>
</li></ul>
<li><a href="#floppyd_005finstalltest">4.2 Floppyd_installtest</a>
<li><a href="#mattrib">4.3 Mattrib</a>
<li><a href="#mbadblocks">4.4 Mbadblocks</a>
<ul>
<li><a href="#mbadblocks">4.4.1 Command line options</a>
<li><a href="#mbadblocks">4.4.2 Bugs</a>
</li></ul>
<li><a href="#mcat">4.5 Mcat</a>
<li><a href="#mcd">4.6 Mcd</a>
<li><a href="#mclasserase">4.7 Mclasserase</a>
<li><a href="#mcopy">4.8 Mcopy</a>
<ul>
<li><a href="#mcopy">4.8.1 Bugs</a>
</li></ul>
<li><a href="#mdel">4.9 Mdel</a>
<li><a href="#mdeltree">4.10 Mdeltree</a>
<li><a href="#mdir">4.11 Mdir</a>
<li><a href="#mdu">4.12 Mdu</a>
<li><a href="#mformat">4.13 Mformat</a>
<li><a href="#mkmanifest">4.14 Mkmanifest</a>
<ul>
<li><a href="#mkmanifest">4.14.1 Example</a>
<li><a href="#mkmanifest">4.14.2 Bugs</a>
</li></ul>
<li><a href="#minfo">4.15 Minfo</a>
<li><a href="#mlabel">4.16 Mlabel</a>
<li><a href="#mmd">4.17 Mmd</a>
<li><a href="#mmount">4.18 Mmount</a>
<li><a href="#mmove">4.19 Mmove</a>
<li><a href="#mpartition">4.20 Mpartition</a>
<li><a href="#mrd">4.21 Mrd</a>
<li><a href="#mren">4.22 Mren</a>
<li><a href="#mshortname">4.23 Mshortname</a>
<li><a href="#mshowfat">4.24 Mshowfat</a>
<li><a href="#mtoolstest">4.25 Mtoolstest</a>
<li><a href="#mtype">4.26 Mtype</a>
<li><a href="#mzip">4.27 Mzip</a>
<ul>
<li><a href="#mzip">4.27.1 Bugs</a>
</li></ul>
</li></ul>
<li><a name="toc_Compiling-mtools" href="#Compiling-mtools">5 Architecture specific compilation flags</a>
<li><a name="toc_Porting-mtools" href="#Porting-mtools">6 Porting mtools to architectures which are not supported yet</a>
<li><a name="toc_Command-Index" href="#Command-Index">Command Index</a>
<li><a name="toc_Variable-Index" href="#Variable-Index">Variable index</a>
<li><a name="toc_Concept-Index" href="#Concept-Index">Concept index</a>
</li></ul>
</div>

<div class="node">
<a name="Top"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Location">Location</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#dir">(dir)</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#dir">(dir)</a>

</div>

<h2 class="unnumbered">Mtools doc</h2>

<p>This is mtools' documentation.

<!-- MANstart 1 -->
<h2 class="unnumbered">Introduction</h2>

<p>Mtools is a collection of tools to allow Unix systems to manipulate
MS-DOS files: read, write, and move around files on an MS-DOS
file system (typically a floppy disk).  Where reasonable, each program
attempts to emulate the MS-DOS equivalent command. However,
unnecessary restrictions and oddities of DOS are not emulated. For
instance, it is possible to move subdirectories from one subdirectory
to another.

   <p>Mtools is sufficient to give access to MS-DOS file systems.  For
instance, commands such as <code>mdir a:</code> work on the <code>a:</code> floppy
without any preliminary mounting or initialization (assuming the default
<samp><span class="file">/etc/mtools.conf</span></samp> works on your machine).  With mtools, one can
change floppies too without unmounting and mounting.

<ul class="menu">
<li><a accesskey="1" href="#Location">Location</a>:           Where to find mtools and early bug fixes
<li><a accesskey="2" href="#Common-features">Common features</a>:    Common features of all mtools commands
<li><a accesskey="3" href="#Configuration">Configuration</a>:      How to configure mtools for your environment
<li><a accesskey="4" href="#Commands">Commands</a>:           The available mtools commands
<li><a accesskey="5" href="#Compiling-mtools">Compiling mtools</a>:   Architecture specific compilation flags
<li><a accesskey="6" href="#Porting-mtools">Porting mtools</a>:     Porting mtools to architectures which are not
                      yet supported

<li><a accesskey="7" href="#Command-Index">Command Index</a>:      Command Index
<li><a accesskey="8" href="#Variable-Index">Variable Index</a>:     Variable Index
<li><a accesskey="9" href="#Concept-Index">Concept Index</a>:      Concept Index
</ul>

<div class="node">
<a name="Location"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Common-features">Common features</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Top">Top</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">1 Where to get mtools</h2>

<p><a name="index-bugs-1"></a><a name="index-ALPHA-patches-2"></a><a name="index-patches-3"></a><a name="index-diffs-4"></a><a name="index-mailing-list-5"></a>
Mtools can be found at the following places (and their mirrors):
<pre class="example">     http://ftp.gnu.org/gnu/mtools/mtools-4.0.18.tar.gz
     http://mtools.linux.lu/mtools-4.0.18.tar.gz
     ftp://www.tux.org/pub/knaff/mtools/mtools-4.0.18.tar.gz
     ftp://ibiblio.unc.edu/pub/Linux/utils/disk-management/mtools-4.0.18.tar.gz
</pre>
   <p>Before reporting a bug, make sure that it has not yet been fixed in the
Alpha patches which can be found at:
<pre class="example">     http://ftp.gnu.org/gnu/mtools/
     http://mtools.linux.lu/
     ftp://www.tux.org/pub/knaff/mtools
</pre>
   <p>These patches are named
<code>mtools-</code><var>version</var><code>-</code><var>ddmm</var><code>.taz</code>, where version
stands for the base version, <var>dd</var> for the day and <var>mm</var> for the
month. Due to a lack of space, I usually leave only the most recent
patch.

   <p>There is an mtools mailing list at mtools @ tux.org .  Please
send all bug reports to this list.  You may subscribe to the list by
sending a message with 'subscribe mtools @ tux.org' in its
body to majordomo @ tux.org . (N.B. Please remove the spaces
around the "@" both times. I left them there in order to fool
spambots.)  Announcements of new mtools versions will also be sent to
the list, in addition to the Linux announce newsgroups.  The mailing
list is archived at http://lists.gnu.org/pipermail/info-mtools/

<div class="node">
<a name="Common-features"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Configuration">Configuration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Location">Location</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">2 Common features of all mtools commands</h2>

<ul class="menu">
<li><a accesskey="1" href="#arguments">arguments</a>:               What the command line parameters of mtools
                           mean
<li><a accesskey="2" href="#drive-letters">drive letters</a>:           Which drives are defined by default
<li><a accesskey="3" href="#directory">directory</a>:               Current working directory
<li><a accesskey="4" href="#long-names">long names</a>:              VFAT-style long filenames
<li><a accesskey="5" href="#name-clashes">name clashes</a>:            Name clash handling, and associated command
                           line options
<li><a accesskey="6" href="#case-sensitivity">case sensitivity</a>:        Case sensitivity
<li><a accesskey="7" href="#high-capacity-formats">high capacity formats</a>:   How to fit more data on your floppies
<li><a accesskey="8" href="#exit-codes">exit codes</a>:              Exit codes
<li><a accesskey="9" href="#bugs">bugs</a>:                    Happens to everybody
</ul>

<div class="node">
<a name="arguments"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#drive-letters">drive letters</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Common-features">Common features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.1 Options and filenames</h3>

<p><a name="index-Filenames-6"></a><a name="index-Options-7"></a>MS-DOS filenames are composed of a drive letter followed by a colon, a
subdirectory, and a filename. Only the filename part is mandatory, the
drive letter and the subdirectory are optional. Filenames without a
drive letter refer to Unix files. Subdirectory names can use either the
'<code>/</code>' or '<code>\</code>' separator.  The use of the '<code>\</code>' separator
or wildcards requires the names to be enclosed in quotes to protect them
from the shell. However, wildcards in Unix filenames should not be
enclosed in quotes, because here we <strong>want</strong> the shell to expand
them.

   <p>The regular expression "pattern matching" routines follow the Unix-style
rules.  For example, `<code>*</code>' matches all MS-DOS files in lieu of
`<code>*.*</code>'.  The archive, hidden, read-only and system attribute bits
are ignored during pattern matching.

   <p>All options use the <code>-</code> (minus) as their first character, not
<code>/</code> as you'd expect in MS-DOS.

   <p>Most mtools commands allow multiple filename parameters, which
doesn't follow MS-DOS conventions, but which is more user-friendly.

   <p>Most mtools commands allow options that instruct them how to handle file
name clashes. See <a href="#name-clashes">name clashes</a>, for more details on these. All
commands accept the <code>-V</code> flags which prints the version, and most
accept the <code>-v</code> flag, which switches on verbose mode. In verbose
mode, these commands print out the name of the MS-DOS files upon which
they act, unless stated otherwise. See <a href="#Commands">Commands</a>, for a description of
the options which are specific to each command.

<div class="node">
<a name="drive-letters"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#directory">directory</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#arguments">arguments</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.2 Drive letters</h3>

<p>The meaning of the drive letters depends on the target architectures. 
However, on most target architectures, drive A is the first floppy
drive, drive B is the second floppy drive (if available), drive J is a
Jaz drive (if available), and drive Z is a Zip drive (if available).  On
those systems where the device name is derived from the SCSI id, the Jaz
drive is assumed to be at SCSI target 4, and the Zip at SCSI target 5
(factory default settings).  On Linux, both drives are assumed to be the
second drive on the SCSI bus (/dev/sdb). The default settings can be
changes using a configuration file (see <a href="#Configuration">Configuration</a>).

   <p>The drive letter : (colon) has a special meaning. It is used to access
image files which are directly specified on the command line using the
<code>-i</code> options.

   <p>Example:
<pre class="example">      mcopy -i my-image-file.bin ::file1 ::file2 .
</pre>
   <p>This copies <code>file1</code> and <code>file2</code> from the image file
(<code>my-image-file.bin</code>) to the <code>/tmp</code> directory.

   <p>You can also supply an offset within the image file by including
<code>@@</code><var>offset</var> into the file name.

   <p>Example:
<pre class="example">      mcopy -i my-image-file.bin@@1M ::file1 ::file2 .
</pre>
   <p>This looks for the image at the offset of 1M in the file, rather than
at its beginning.

<div class="node">
<a name="directory"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#long-names">long names</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#drive-letters">drive letters</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.3 Current working directory</h3>

<p><a name="index-mcd-_0028introduction_0029-8"></a><a name="index-Directory-9"></a><a name="index-Working-directory-10"></a><a name="index-Current-working-directory-11"></a><a name="index-Default-directory-12"></a>
The <code>mcd</code> command (<a href="#mcd">mcd</a>) is used to establish the device and
the current working directory (relative to the MS-DOS file system),
otherwise the default is assumed to be <code>A:/</code>. However, unlike
MS-DOS, there is only one working directory for all drives, and not one
per drive.

<div class="node">
<a name="long-names"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#name-clashes">name clashes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#directory">directory</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.4 VFAT-style long file names</h3>

<p><a name="index-Long-file-name-13"></a><a name="index-Windows-95_002dstyle-file-names-14"></a><a name="index-VFAT_002dstyle-file-names-15"></a><a name="index-Primary-file-name-_0028long-names_0029-16"></a><a name="index-Secondary-file-name-_0028long-names_0029-17"></a>
This version of mtools supports VFAT style long filenames. If a Unix
filename is too long to fit in a short DOS name, it is stored as a
VFAT long name, and a companion short name is generated. This short
name is what you see when you examine the disk with a pre-7.0 version
of DOS. 
 The following table shows some examples of short names:

<pre class="example">     Long name       MS-DOS name     Reason for the change
     ---------       ----------      ---------------------
     thisisatest     THISIS~1        filename too long
     alain.knaff     ALAIN~1.KNA     extension too long
     prn.txt         PRN~1.TXT       PRN is a device name
     .abc            ABC~1           null filename
     hot+cold        HOT_CO~1        illegal character
</pre>
   <p>As you see, the following transformations happen to derive a short
name:
     <ul>
<li>Illegal characters are replaced by underscores. The illegal characters
are <code>;+=[]',\"*\\&lt;&gt;/?:|</code>. 
<li>Extra dots, which cannot be interpreted as a main name/extension
separator are removed
<li>A <code>~</code><var>n</var> number is generated,
<li>The name is shortened so as to fit in the 8+3 limitation
</ul>

   <p>The initial Unix-style file name (whether long or short) is also called
the <dfn>primary</dfn> name, and the derived short name is also called the
<dfn>secondary</dfn> name.

   <p>Example:
<pre class="example">      mcopy /etc/motd a:Reallylongname
</pre>
   <p>Mtools creates a VFAT entry for Reallylongname, and uses REALLYLO as
a short name. Reallylongname is the primary name, and REALLYLO is the
secondary name.
<pre class="example">      mcopy /etc/motd a:motd
</pre>
   <p>Motd fits into the DOS filename limits. Mtools doesn't need to
derivate another name. Motd is the primary name, and there is no
secondary name.

   <p>In a nutshell: The primary name is the long name, if one exists, or
the short name if there is no long name.

   <p>Although VFAT is much more flexible than FAT, there are still names
that are not acceptable, even in VFAT. There are still some illegal
characters left (<code>\"*\\&lt;&gt;/?:|</code>), and device names are still
reserved.

<pre class="example">     Unix name       Long name       Reason for the change
     ---------       ----------      ---------------------
     prn             prn-1           PRN is a device name
     ab:c            ab_c-1          illegal character
</pre>
   <p>As you see, the following transformations happen if a long name is
illegal:
     <ul>
<li>Illegal characters are replaces by underscores,
<li>A <code>-</code><var>n</var> number is generated,
</ul>

<div class="node">
<a name="name-clashes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#case-sensitivity">case sensitivity</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#long-names">long names</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.5 Name clashes</h3>

<p><a name="index-Name-clashes-18"></a><a name="index-Duplicate-file-names-19"></a><a name="index-Overwriting-files-20"></a><a name="index-Primary-file-name-_0028name-clashes_0029-21"></a><a name="index-Secondary-file-name-_0028name-clashes_0029-22"></a>
When writing a file to disk, its long name or short name may collide
with an already existing file or directory. This may happen for all
commands which create new directory entries, such as <code>mcopy</code>,
<code>mmd</code>, <code>mren</code>, <code>mmove</code>. When a name clash happens, mtools
asks you what it should do. It offers several choices:

     <dl>
<dt><code>overwrite</code><dd>Overwrites the existing file. It is not possible to overwrite a
directory with a file. 
<br><dt><code>rename</code><dd>Renames the newly created file. Mtools prompts for the new filename
<br><dt><code>autorename</code><dd>Renames the newly created file. Mtools chooses a name by itself, without
prompting
<br><dt><code>skip</code><dd>Gives up on this file, and moves on to the next (if any)
</dl>

   <p>To chose one of these actions, type its first letter at the prompt. If
you use a lower case letter, the action only applies for this file only,
if you use an upper case letter, the action applies to all files, and
you won't be prompted again.

   <p>You may also chose actions (for all files) on the command line, when
invoking mtools:

     <dl>
<dt><code>-D o</code><dd>Overwrites primary names by default. 
<br><dt><code>-D O</code><dd>Overwrites secondary names by default. 
<br><dt><code>-D r</code><dd>Renames primary name by default. 
<br><dt><code>-D R</code><dd>Renames secondary name by default. 
<br><dt><code>-D a</code><dd>Autorenames primary name by default. 
<br><dt><code>-D A</code><dd>Autorenames secondary name by default. 
<br><dt><code>-D s</code><dd>Skip primary name by default. 
<br><dt><code>-D S</code><dd>Skip secondary name by default. 
<br><dt><code>-D m</code><dd>Ask user what to do with primary name. 
<br><dt><code>-D M</code><dd>Ask user what to do with secondary name. 
</dl>

   <p>Note that for command line switches lower/upper differentiates between
primary/secondary name whereas for interactive choices, lower/upper
differentiates between just-this-time/always.

   <p>The primary name is the name as displayed in Windows 95 or Windows NT:
i.e. the long name if it exists, and the short name otherwise.  The
secondary name is the "hidden" name, i.e. the short name if a long name
exists.

   <p>By default, the user is prompted if the primary name clashes, and the
secondary name is autorenamed.

   <p>If a name clash occurs in a Unix directory, mtools only asks whether
to overwrite the file, or to skip it.

<div class="node">
<a name="case-sensitivity"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#high-capacity-formats">high capacity formats</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#name-clashes">name clashes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.6 Case sensitivity of the VFAT file system</h3>

<p><a name="index-Case-sensitivity-23"></a>
The VFAT file system is able to remember the case of the
filenames. However, filenames which differ only in case are not allowed
to coexist in the same directory. For example if you store a file called
LongFileName on a VFAT file system, mdir shows this file as LongFileName,
and not as Longfilename. However, if you then try to add LongFilename to
the same directory, it is refused, because case is ignored for clash
checks.

   <p>The VFAT file system allows to store the case of a filename in the
attribute byte, if all letters of the filename are the same case, and if
all letters of the extension are the same case too. Mtools uses this
information when displaying the files, and also to generate the Unix
filename when mcopying to a Unix directory. This may have unexpected
results when applied to files written using an pre-7.0 version of DOS:
Indeed, the old style filenames map to all upper case. This is different
from the behavior of the old version of mtools which used to generate
lower case Unix filenames.

<div class="node">
<a name="high-capacity-formats"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#exit-codes">exit codes</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#case-sensitivity">case sensitivity</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.7 high capacity formats</h3>

<p><a name="index-Special-formats-24"></a><a name="index-High-capacity-formats-25"></a><a name="index-Odd-formats-26"></a><a name="index-Weird-formats-27"></a><a name="index-Formats_002c-high-capacity-28"></a><a name="index-Linux-enhancements-_0028High-Capacity-Formats_0029-29"></a>
Mtools supports a number of formats which allow to store more data on
disk as usual. Due to different operating system abilities, these
formats are not supported on all operating systems. Mtools recognizes
these formats transparently where supported.

   <p>In order to format these disks, you need to use an operating system
specific tool. For Linux, suitable floppy tools can be found in the
<code>fdutils</code> package at the following locations~:
<pre class="example">     <code>ftp://www.tux.org/pub/knaff/fdutils/</code>.
     <code>ftp://ibiblio.unc.edu/pub/Linux/utils/disk-management/fdutils-*</code>
</pre>
   <p>See the manual pages included in that package for further detail: Use
<code>superformat</code> to format all formats except XDF, and use
<code>xdfcopy</code> to format XDF.

<ul class="menu">
<li><a accesskey="1" href="#more-sectors">more sectors</a>:       Putting more sectors per track on the disk
<li><a accesskey="2" href="#bigger-sectors">bigger sectors</a>:     Use bigger sectors to save header space
<li><a accesskey="3" href="#g_t2m">2m</a>:                 Use a standard first track
<li><a accesskey="4" href="#XDF">XDF</a>:                OS/2's eXtended density format
</ul>

<div class="node">
<a name="more-sectors"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bigger-sectors">bigger sectors</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#high-capacity-formats">high capacity formats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#high-capacity-formats">high capacity formats</a>

</div>

<h4 class="subsection">2.7.1 More sectors</h4>

<p><a name="index-fdformat-30"></a><a name="index-vgacopy-31"></a><a name="index-DMF-disks-32"></a><a name="index-Windows-95-_0028DMF-disks_0029-33"></a>
The oldest method of fitting more data on a disk is to use more sectors
and more cylinders. Although the standard format uses 80 cylinders and
18 sectors (on a 3 1/2 high density disk), it is possible to use up to
83 cylinders (on most drives) and up to 21 sectors. This method allows
to store up to 1743K on a 3 1/2 HD disk. However, 21 sector disks are
twice as slow as the standard 18 sector disks because the sectors are
packed so close together that we need to interleave them. This problem
doesn't exist for 20 sector formats.

   <p>These formats are supported by numerous DOS shareware utilities such as
<code>fdformat</code> and <code>vgacopy</code>. In his infinite hubris, Bill Gate$
believed that he invented this, and called it &lsquo;<samp><span class="samp">DMF disks</span></samp>&rsquo;, or
&lsquo;<samp><span class="samp">Windows formatted disks</span></samp>&rsquo;. But in reality, it has already existed
years before! Mtools supports these formats on Linux, on SunOS and on
the DELL Unix PC.

<div class="node">
<a name="bigger-sectors"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#g_t2m">2m</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#more-sectors">more sectors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#high-capacity-formats">high capacity formats</a>

</div>

<h4 class="subsection">2.7.2 Bigger sectors</h4>

<p><a name="index-bigger-sectors-34"></a>By using bigger sectors it is possible to go beyond the capacity which
can be obtained by the standard 512-byte sectors. This is because of the
sector header. The sector header has the same size, regardless of how
many data bytes are in the sector. Thus, we save some space by using
<em>fewer</em>, but bigger sectors. For example, 1 sector of 4K only takes
up header space once, whereas 8 sectors of 512 bytes have also 8
headers, for the same amount of useful data.

   <p>This method allows to store up to 1992K on a 3 1/2 HD disk.

   <p>Mtools supports these formats only on Linux.

<div class="node">
<a name="g_t2m"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#XDF">XDF</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#bigger-sectors">bigger sectors</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#high-capacity-formats">high capacity formats</a>

</div>

<h4 class="subsection">2.7.3 2m</h4>

<p><a name="index-g_t2m-35"></a>
The 2m format was originally invented by Ciriaco Garcia de Celis. It
also uses bigger sectors than usual in order to fit more data on the
disk.  However, it uses the standard format (18 sectors of 512 bytes
each) on the first cylinder, in order to make these disks easier to
handle by DOS. Indeed this method allows to have a standard sized
boot sector, which contains a description of how the rest of the disk
should be read.

   <p>However, the drawback of this is that the first cylinder can hold less
data than the others. Unfortunately, DOS can only handle disks where
each track contains the same amount of data. Thus 2m hides the fact that
the first track contains less data by using a <dfn>shadow
FAT</dfn>. (Usually, DOS stores the FAT in two identical copies, for
additional safety.  XDF stores only one copy, but tells DOS that it
stores two. Thus the space that would be taken up by the second FAT copy
is saved.) This also means that you should <strong>never use a 2m disk
to store anything else than a DOS file system</strong>.

   <p>Mtools supports these formats only on Linux.

<div class="node">
<a name="XDF"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#g_t2m">2m</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#high-capacity-formats">high capacity formats</a>

</div>

<h4 class="subsection">2.7.4 XDF</h4>

<p><a name="index-XDF-disks-36"></a><a name="index-OS_002f2-_0028XDF-disks_0029-37"></a>
XDF is a high capacity format used by OS/2. It can hold 1840 K per
disk. That's lower than the best 2m formats, but its main advantage is
that it is fast: 600 milliseconds per track. That's faster than the 21
sector format, and almost as fast as the standard 18 sector format. In
order to access these disks, make sure mtools has been compiled with XDF
support, and set the <code>use_xdf</code> variable for the drive in the
configuration file. See <a href="#Compiling-mtools">Compiling mtools</a>, and <a href="#miscellaneous-variables">miscellaneous variables</a>,
for details on how to do this. Fast XDF access is only available for
Linux kernels which are more recent than 1.1.34.

   <p>Mtools supports this format only on Linux.

   <p><strong>Caution / Attention distributors</strong>: If mtools is compiled on a
Linux kernel more recent than 1.3.34, it won't run on an older
kernel. However, if it has been compiled on an older kernel, it still
runs on a newer kernel, except that XDF access is slower. It is
recommended that distribution authors only include mtools binaries
compiled on kernels older than 1.3.34 until 2.0 comes out. When 2.0 will
be out, mtools binaries compiled on newer kernels may (and should) be
distributed. Mtools binaries compiled on kernels older than 1.3.34 won't
run on any 2.1 kernel or later.

<div class="node">
<a name="exit-codes"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#bugs">bugs</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#high-capacity-formats">high capacity formats</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.8 Exit codes</h3>

<p>All the Mtools commands return 0 on success, 1 on utter failure, or 2
on partial failure.  All the Mtools commands perform a few sanity
checks before going ahead, to make sure that the disk is indeed an
MS-DOS disk (as opposed to, say an ext2 or MINIX disk). These checks
may reject partially corrupted disks, which might otherwise still be
readable. To avoid these checks, set the MTOOLS_SKIP_CHECK
environmental variable or the corresponding configuration file variable
(see <a href="#global-variables">global variables</a>)
<div class="node">
<a name="bugs"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#exit-codes">exit codes</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Common-features">Common features</a>

</div>

<h3 class="section">2.9 Bugs</h3>

<p>An unfortunate side effect of not guessing the proper device (when
multiple disk capacities are supported) is an occasional error message
from the device driver.  These can be safely ignored.

   <p>The fat checking code chokes on 1.72 Mb disks mformatted with pre-2.0.7
mtools. Set the environmental variable MTOOLS_FAT_COMPATIBILITY (or the
corresponding configuration file variable, <a href="#global-variables">global variables</a>) to
bypass the fat checking.

<!-- MANskip 1 -->
<div class="node">
<a name="Configuration"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Commands">Commands</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Common-features">Common features</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">3 How to configure mtools for your environment</h2>

<h3 class="section">3.1 Description</h3>

<p><a name="index-Configuration-files-38"></a><a name="index-MTOOLSRC-39"></a>
 This sections explains the syntax of the configurations files for
mtools. The configuration files
<!-- MANend-skip 5 -->
are called <samp><span class="file">/etc/mtools.conf</span></samp> and <samp><span class="file">~/.mtoolsrc</span></samp>. If
the environmental variable <code>MTOOLSRC</code> is set, its contents is used
as the filename for a third configuration file. These configuration
files describe the following items:

     <ul>
<li>Global configuration flags and variables
<li>Per drive flags and variables
</ul>

<ul class="menu">
<li><a accesskey="1" href="#configuration-file-location">configuration file location</a>:   Where mtools looks for its configuration files
<li><a accesskey="2" href="#general-syntax">general syntax</a>:         The layout of the configuration files
<li><a accesskey="3" href="#default-values">default values</a>:         Why you don't need a configuration file in most cases
<li><a accesskey="4" href="#global-variables">global variables</a>:       Variables that are independent of the drive
<li><a accesskey="5" href="#per-drive-variables">per drive variables</a>:    Variables that are specific to a given drive
<li><a accesskey="6" href="#parsing-order">parsing order</a>:          Location of configuration files and parsing order
<li><a accesskey="7" href="#old-style-configuration">old style configuration</a>:       Backwards compatibility
</ul>

<div class="node">
<a name="configuration-file-location"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#general-syntax">general syntax</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Configuration">Configuration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">3.2 Location of the configuration files</h3>

<p><a name="index-Configuration-file-name-40"></a><a name="index-Name-of-configuration-files-41"></a><a name="index-Location-of-configuration-files-42"></a>
<samp><span class="file">/etc/mtools.conf</span></samp> is the system-wide configuration file,
and <samp><span class="file">~/.mtoolsrc</span></samp> is the user's private configuration file.

   <p>On some systems, the system-wide configuration file is called
<samp><span class="file">/etc/default/mtools.conf</span></samp> instead.

<div class="node">
<a name="general-syntax"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#default-values">default values</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#configuration-file-location">configuration file location</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h4 class="subsection">3.2.1 General configuration file syntax</h4>

<p><a name="index-Syntax-of-the-configuration-file-43"></a><a name="index-Configuration-file-syntax-44"></a>
The configuration files is made up of sections. Each section starts
with a keyword identifying the section followed by a colon. 
Then follow variable assignments and flags. Variable assignments take
the following form:
<pre class="display">     name=value
</pre>
   <p>Flags are lone keywords without an equal sign and value following
them.  A section either ends at the end of the file or where the next
section begins.

   <p>Lines starting with a hash (<code>#</code>) are comments. Newline characters
are equivalent to whitespace (except where ending a comment). The
configuration file is case insensitive, except for item enclosed in
quotes (such as filenames).

<div class="node">
<a name="default-values"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#global-variables">global variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#general-syntax">general syntax</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">3.3 Default values</h3>

<p><a name="index-Default-values-45"></a><a name="index-Default-configuration-46"></a><a name="index-Configuration-file-47"></a>For most platforms, mtools contains reasonable compiled-in defaults for
physical floppy drives.  Thus, you usually don't need to bother with the
configuration file, if all you want to do with mtools is to access your
floppy drives. On the other hand, the configuration file is needed if
you also want to use mtools to access your hard disk partitions and
DOSEMU image files.

<div class="node">
<a name="global-variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#per-drive-variables">per drive variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#default-values">default values</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">3.4 Global variables</h3>

<p><a name="index-Global-configuration-variables-48"></a><a name="index-Drive-independent-configuration-variables-49"></a><a name="index-Environmental-variables-50"></a><a name="index-MTOOLS_005fSKIP_005fCHECK-51"></a><a name="index-MTOOLS_005fFAT_005fCOMPATIBILITY-52"></a><a name="index-MTOOLS_005fLOWER_005fCASE-53"></a><a name="index-MTOOLS_005fNO_005fVFAT-54"></a><a name="index-FreeDOS-55"></a>
Global flags may be set to 1 or to 0.

   <p>The following global flags are recognized:

     <dl>
<dt><code>MTOOLS_SKIP_CHECK</code><dd>If this is set to 1, mtools skips most of its sanity checks. This is
needed to read some Atari disks which have been made with the earlier
ROMs, and which would not be recognized otherwise. 
<br><dt><code>MTOOLS_FAT_COMPATIBILITY</code><dd>If this is set to 1, mtools skips the fat size checks. Some disks have
a bigger FAT than they really need to. These are rejected if this
option is not set. 
<br><dt><code>MTOOLS_LOWER_CASE</code><dd>If this is set to 1, mtools displays all-upper-case short filenames as
lowercase. This has been done to allow a behavior which is consistent
with older versions of mtools which didn't know about the case bits. 
<br><dt><code>MTOOLS_NO_VFAT</code><dd>If this is set to 1, mtools won't generate VFAT entries for filenames
which are mixed-case, but otherwise legal dos filenames.  This is useful
when working with DOS versions which can't grok VFAT long names, such as
FreeDOS. 
<br><dt><code>MTOOLS_DOTTED_DIR</code><dd>In a wide directory, prints the short name with a dot instead of spaces
separating the basename and the extension. 
<br><dt><code>MTOOLS_NAME_NUMERIC_TAIL</code><dd>If this is set to one (default), generate numeric tails for all long
names (~1).  If set to zero, only generate numeric tails if otherwise a
clash would have happened. 
<br><dt><code>MTOOLS_TWENTY_FOUR_HOUR_CLOCK</code><dd>If 1, uses the European notation for times (twenty four hour clock),
else uses the UK/US notation (am/pm)
</dl>

   <p>Example:
Inserting the following line into your configuration file instructs
mtools to skip the sanity checks:
<pre class="example">       MTOOLS_SKIP_CHECK=1
</pre>
   <p>Global variables may also be set via the environment:
<pre class="example">       export MTOOLS_SKIP_CHECK=1
</pre>
   <p>Global string variables may be set to any value:
     <dl>
<dt><code>MTOOLS_DATE_STRING</code><dd>The format used for printing dates of files.  By default, is dd-mm-yyyy. 
</dl>

<div class="node">
<a name="per-drive-variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#parsing-order">parsing order</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#global-variables">global variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">3.5 Per drive flags and variables</h3>

<p><a name="index-Drive-description-56"></a><a name="index-Drive-configuration-57"></a>

<ul class="menu">
<li><a accesskey="1" href="#general-information">general information</a>:    What a drive description looks like
<li><a accesskey="2" href="#location-information">location information</a>:   Where is the drive data physically stored
<li><a accesskey="3" href="#geometry-description">geometry description</a>:   Describes the physical characteristics of
                          the media
<li><a accesskey="4" href="#open-flags">open flags</a>:             Flags passed to the open system call when the
                          device is opened
<li><a accesskey="5" href="#miscellaneous-variables">miscellaneous variables</a>:         Variables which don't fit in either category
<li><a accesskey="6" href="#miscellaneous-flags">miscellaneous flags</a>: 		  Switch variables, which can be enabled or disabled
<li><a accesskey="7" href="#multiple-descriptions">multiple descriptions</a>:  How to supply several descriptions for a
                          drive, to be tried one after the other. 
</ul>

<div class="node">
<a name="general-information"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#location-information">location information</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#per-drive-variables">per drive variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#per-drive-variables">per drive variables</a>

</div>

<h4 class="subsection">3.5.1 General information</h4>

<p><a name="index-Drive-description_002c-example-58"></a><a name="index-Drive-configuration_002c-example-59"></a><a name="index-drive-60"></a>
Per drive flags and values may be described in a drive section. A
drive section starts with
<code>drive</code> "<var>driveletter</var>" :

   <p>Then follow variable-value pairs and flags.

   <p>This is a sample drive description:
<pre class="example">       drive a:
         file="/dev/fd0" use_xdf=1
</pre>
   <div class="node">
<a name="location-information"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#geometry-description">geometry description</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#general-information">general information</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#per-drive-variables">per drive variables</a>

</div>

<h4 class="subsection">3.5.2 Location information</h4>

<p><a name="index-Hdimage-61"></a>
For each drive, you need to describe where its data is physically
stored (image file, physical device, partition, offset).

     <dl>
<dt><code>file</code><dd><a name="index-Image-file-62"></a><a name="index-Name-of-device-node-63"></a><a name="index-File-name-of-device-node-64"></a><a name="index-file-65"></a>The name of the file or device holding the disk image. This is
mandatory. The file name should be enclosed in quotes.

     <br><dt><code>partition</code><dd><a name="index-DOSEMU-hard-disk-image-66"></a><a name="index-Zip-disks-_0028partitions_0029-67"></a><a name="index-Jaz-disks-_0028partitions_0029-68"></a><a name="index-Syquest-disks-69"></a><a name="index-Magneto_002doptical-disks-70"></a><a name="index-OS_002f2-_0028layout-of-removable-media_0029-71"></a><a name="index-Windows-NT-_0028layout-of-removable-media_0029-72"></a><a name="index-Removable-media-73"></a><a name="index-Partitioned-image-file-74"></a>Tells mtools to treat the drive as a partitioned device, and to use the
given partition. Only primary partitions are accessible using this
method, and they are numbered from 1 to 4. For logical partitions, use
the more general <code>offset</code> variable. The <code>partition</code> variable
is intended for removable media such as Syquest disks, ZIP drives, and
magneto-optical disks. Although traditional DOS sees Syquest disks and
magneto-optical disks as &lsquo;<samp><span class="samp">giant floppy disks</span></samp>&rsquo; which are
unpartitioned, OS/2 and Windows NT treat them like hard disks,
i.e. partitioned devices. The <code>partition</code> flag is also useful DOSEMU
hdimages. It is not recommended for hard disks for which direct access
to partitions is available through mounting.

     <br><dt><code>offset</code><dd><a name="index-Ram-disk-75"></a><a name="index-Atari-Ram-disk-76"></a>Describes where in the file the MS-DOS file system starts. This is useful
for logical partitions in DOSEMU hdimages, and for ATARI ram disks. By
default, this is zero, meaning that the file system starts right at the
beginning of the device or file. 
</dl>

<div class="node">
<a name="geometry-description"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#open-flags">open flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#location-information">location information</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#per-drive-variables">per drive variables</a>

</div>

<h4 class="subsection">3.5.3 Disk Geometry Configuration</h4>

<p><a name="index-Disk-Geometry-77"></a><a name="index-Configuration-of-disk-geometry-78"></a><a name="index-Description-of-disk-geometry-79"></a><a name="index-Format-of-disk-80"></a><a name="index-High-density-disk-81"></a><a name="index-Low-density-disk-82"></a><a name="index-mformat-_0028geometry-used-for_0029-83"></a>
Geometry information describes the physical characteristics about the
disk. Its has three purposes:

     <dl>
<dt>formatting<dd>The geometry information is written into the boot sector of the newly
made disk. However, you may also describe the geometry information on
the command line. See <a href="#mformat">mformat</a>, for details. 
<br><dt>filtering<dd>On some Unixes there are device nodes which only support one physical
geometry. For instance, you might need a different node to access a disk
as high density or as low density. The geometry is compared to the
actual geometry stored on the boot sector to make sure that this device
node is able to correctly read the disk. If the geometry doesn't match,
this drive entry fails, and the next drive entry bearing the same drive
letter is tried. See <a href="#multiple-descriptions">multiple descriptions</a>, for more details on
supplying several descriptions for one drive letter.

     <p>If no geometry information is supplied in the configuration file, all
disks are accepted. On Linux (and on SPARC) there exist device nodes
with configurable geometry (<samp><span class="file">/dev/fd0</span></samp>, <samp><span class="file">/dev/fd1</span></samp> etc),
and thus filtering is not needed (and ignored) for disk drives.  (Mtools
still does do filtering on plain files (disk images) in Linux: this is
mainly intended for test purposes, as I don't have access to a Unix
which would actually need filtering).

     <p>If you do not need filtering, but want still a default geometry for
mformatting, you may switch off filtering using the <code>mformat_only</code>
flag.

     <p>If you want filtering, you should supply the <code>filter</code> flag.  If you
supply a geometry, you must supply one of both flags.

     <br><dt>initial geometry<dd>On devices that support it (usually floppy devices), the geometry
information is also used to set the initial geometry. This initial
geometry is applied while reading the boot sector, which contains the
real geometry.  If no geometry information is supplied in the
configuration file, or if the <code>mformat_only</code> flag is supplied, no
initial configuration is done.

     <p>On Linux, initial geometry is not really needed, as the configurable
devices are able to auto-detect the disk type accurately enough (for
most common formats) to read the boot sector. 
</dl>

   <p>Wrong geometry information may lead to very bizarre errors. That's why I
strongly recommend that you add the <code>mformat_only</code> flag to your
drive description, unless you really need filtering or initial geometry.

   <p>The following geometry related variables are available:

     <dl>
<dt><code>cylinders</code><dt><code>tracks</code><dd><a name="index-cylinders-84"></a><a name="index-tracks-85"></a>The number of cylinders. (<code>cylinders</code> is the preferred form,
<code>tracks</code> is considered obsolete)
<br><dt><code>heads</code><dd><a name="index-heads-86"></a>The number of heads (sides). 
<br><dt><code>sectors</code><dd><a name="index-sectors-87"></a>The number of sectors per track. 
</dl>

   <p>Example: the following drive section describes a 1.44M drive:

<pre class="example">       drive a:
           file="/dev/fd0H1440"
           fat_bits=12
           cylinders=80 heads=2 sectors=18
           mformat_only
</pre>
   <p>The following shorthand geometry descriptions are available:

     <dl>
<dt><code>1.44m</code><dd>high density 3 1/2 disk. Equivalent to:
<code>fat_bits=12 cylinders=80 heads=2 sectors=18</code>
<br><dt><code>1.2m</code><dd>high density 5 1/4 disk. Equivalent to:
<code>fat_bits=12 cylinders=80 heads=2 sectors=15</code>
<br><dt><code>720k</code><dd>double density 3 1/2 disk. Equivalent to:
<code>fat_bits=12 cylinders=80 heads=2 sectors=9</code>
<br><dt><code>360k</code><dd>double density 5 1/4 disk. Equivalent to:
<code>fat_bits=12 cylinders=40 heads=2 sectors=9</code>
</dl>

   <p>The shorthand format descriptions may be amended. For example,
<code>360k sectors=8</code>
describes a 320k disk and is equivalent to:
<code>fat_bits=12 cylinders=40 heads=2 sectors=8</code>

<div class="node">
<a name="open-flags"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#miscellaneous-variables">miscellaneous variables</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#geometry-description">geometry description</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#per-drive-variables">per drive variables</a>

</div>

<h4 class="subsection">3.5.4 Open Flags</h4>

<p><a name="index-sync-88"></a><a name="index-nodelay-89"></a><a name="index-exclusive-90"></a><a name="index-open-flags-91"></a><a name="index-synchronous-writing-92"></a><a name="index-exclusive-access-to-a-drive-93"></a>
Moreover, the following flags are available:

     <dl>
<dt><code>sync</code><dd>All i/o operations are done synchronously
<br><dt><code>nodelay</code><dd>The device or file is opened with the O_NDELAY flag. This is needed on
some non-Linux architectures. 
<br><dt><code>exclusive</code><dd>The device or file is opened with the O_EXCL flag. On Linux, this
ensures exclusive access to the floppy drive. On most other
architectures, and for plain files it has no effect at all. 
</dl>

<div class="node">
<a name="miscellaneous-variables"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#miscellaneous-flags">miscellaneous flags</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#open-flags">open flags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#per-drive-variables">per drive variables</a>

</div>

<h4 class="subsection">3.5.5 General Purpose Drive Variables</h4>

<p>The following general purpose drive variables are available.  Depending
to their type, these variables can be set to a string (precmd) or
an integer (all others)

     <dl>
<dt><code>fat_bits</code><dd><a name="index-fat_005fbits-94"></a>The number of FAT bits. This may be 12 or 16. This is very rarely
needed, as it can almost always be deduced from information in the
boot sector. On the contrary, describing the number of fat bits may
actually be harmful if you get it wrong. You should only use it if
mtools gets the auto-detected number of fat bits wrong, or if you want
to mformat a disk with a weird number of fat bits. 
<br><dt><code>codepage</code><dd>Describes the DOS code page used for short filenames. This is a number
between 1 and 999. By default, code page 850 is used. The reason for
this is because this code page contains most of the characters that are
also available in ISO-Latin-1. You may also specify a global code page
for all drives by using the global <code>default_codepage</code> parameter
(outside of any drive description). This parameters exists starting at
version 4.0.0
<br><dt><code>precmd</code><dd><a name="index-Solaris-_0028volcheck_0029-95"></a><a name="index-Executing-commands-before-opening-the-device-96"></a>On some variants of Solaris, it is necessary to call 'volcheck -v'
before opening a floppy device, in order for the system to notice that
there is indeed a disk in the drive. <code>precmd="volcheck -v"</code> in the
drive clause establishes the desired behavior.

     <br><dt><code>blocksize</code><dd><a name="index-raw-device-97"></a><a name="index-character-devices-98"></a><a name="index-blocksize-99"></a>This parameter represents a default block size to be always used on this
device.  All I/O is done with multiples of this block size,
independently of the sector size registered in the file system's boot
sector.  This is useful for character devices whose sector size is not
512, such as for example CD-ROM drives on Solaris.

   </dl>

   <p>Only the <code>file</code> variable is mandatory. The other parameters may
be left out. In that case a default value or an auto-detected value is
used.

<div class="node">
<a name="miscellaneous-flags"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#multiple-descriptions">multiple descriptions</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#miscellaneous-variables">miscellaneous variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#per-drive-variables">per drive variables</a>

</div>

<h4 class="subsection">3.5.6 General Purpose Drive Flags</h4>

<p>A flag can either be set to 1 (enabled) or 0 (disabled). If the value is
omitted, it is enabled.  For example, <code>scsi</code> is equivalent to
<code>scsi=1</code>

     <dl>
<dt><code>nolock</code><dd><a name="index-disable-locking-100"></a><a name="index-locking-_0028disabling-it_0029-101"></a><a name="index-plain-floppy_003a-device-xxx-busy-102"></a>Instruct mtools to not use locking on this drive.  This is needed on
systems with buggy locking semantics.  However, enabling this makes
operation less safe in cases where several users may access the same
drive at the same time.

     <br><dt><code>scsi</code><dd><a name="index-setuid-installation-_0028needed-for-raw-SCSI-I_002fO_0029-103"></a><a name="index-Solaris-_0028Raw-access-to-SCSI-devices-such-as-Zip-_0026-Jaz_0029-104"></a><a name="index-SunOS-_0028Raw-access-to-SCSI-devices-such-as-Zip-_0026-Jaz_0029-105"></a><a name="index-Zip-disks-_0028raw-SCSI-access_0029-106"></a><a name="index-Jaz-disks-_0028raw-SCSI-access_0029-107"></a><a name="index-Syquest-disks-_0028raw-SCSI-access_0029-108"></a><a name="index-SCSI-devices-109"></a>When set to 1, this option tells mtools to use raw SCSI I/O instead of
the standard read/write calls to access the device. Currently, this is
supported on HP-UX, Solaris and SunOS.  This is needed because on some
architectures, such as SunOS or Solaris, PC media can't be accessed
using the <code>read</code> and <code>write</code> system calls, because the OS expects
them to contain a Sun specific "disk label".

     <p>As raw SCSI access always uses the whole device, you need to specify the
"partition" flag in addition

     <p>On some architectures, such as Solaris, mtools needs root privileges to
be able to use the <code>scsi</code> option.  Thus mtools should be installed
setuid root on Solaris if you want to access Zip/Jaz drives.  Thus, if
the <code>scsi</code> flag is given, <code>privileged</code> is automatically
implied, unless explicitly disabled by <code>privileged=0</code>

     <p>Mtools uses its root privileges to open the device, and to issue the
actual SCSI I/O calls.  Moreover, root privileges are only used for
drives described in a system-wide configuration file such as
<samp><span class="file">/etc/mtools.conf</span></samp>, and not for those described in
<samp><span class="file">~/.mtoolsrc</span></samp> or <samp><span class="file">$MTOOLSRC</span></samp>.

     <br><dt><code>privileged</code><dd><a name="index-setuid-installation-110"></a><a name="index-setgid-installation-111"></a>When set to 1, this instructs mtools to use its setuid and setgid
privileges for opening the given drive.  This option is only valid for
drives described in the system-wide configuration files (such as
<samp><span class="file">/etc/mtools.conf</span></samp>, not <samp><span class="file">~/.mtoolsrc</span></samp> or
<samp><span class="file">$MTOOLSRC</span></samp>).  Obviously, this option is also a no op if mtools is
not installed setuid or setgid.  This option is implied by 'scsi=1', but
again only for drives defined in system-wide configuration files. 
Privileged may also be set explicitly to 0, in order to tell mtools not
to use its privileges for a given drive even if <code>scsi=1</code> is set.

     <p>Mtools only needs to be installed setuid if you use the
<code>privileged</code> or <code>scsi</code> drive variables.  If you do not use
these options, mtools works perfectly well even when not installed
setuid root.

     <br><dt><code>vold</code><dd><a name="index-Solaris-_0028vold_0029-112"></a><a name="index-Vold-_0028mediamgr_0029-113"></a>
Instructs mtools to interpret the device name as a vold identifier
rather than as a filename.  The vold identifier is translated into a
real filename using the <code>media_findname()</code> and
<code>media_oldaliases()</code> functions of the <code>volmgt</code> library.  This
flag is only available if you configured mtools with the
<code>--enable-new-vold</code> option before compilation.

     <br><dt><code>swap</code><dd><a name="index-Atari-114"></a><a name="index-Wordswapped-115"></a>
Consider the media as a word-swapped Atari disk.

     <br><dt><code>use_xdf</code><dd><a name="index-XDF-disks-_0028how-to-configure_0029-116"></a><a name="index-use_005fxdf-117"></a>If this is set to a non-zero value, mtools also tries to access this
disk as an XDF disk. XDF is a high capacity format used by OS/2. This
is off by default. See <a href="#XDF">XDF</a>, for more details. 
<br><dt><code>mformat_only</code><dd><a name="index-mformat_005fonly-118"></a>Tells mtools to use the geometry for this drive only for mformatting and
not for filtering.

     <br><dt><code>filter</code><dd><a name="index-filter-119"></a>Tells mtools to use the geometry for this drive both for mformatting and
filtering.

     <br><dt><code>remote</code><dd>Tells mtools to connect to floppyd (see <a href="#floppyd">floppyd</a>). 
</dl>

<div class="node">
<a name="multiple-descriptions"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#miscellaneous-flags">miscellaneous flags</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#per-drive-variables">per drive variables</a>

</div>

<h4 class="subsection">3.5.7 Supplying multiple descriptions for a drive</h4>

<p>It is possible to supply multiple descriptions for a drive. In that
case, the descriptions are tried in order until one is found that
fits. Descriptions may fail for several reasons:

     <ol type=1 start=1>
<li>because the geometry is not appropriate,
<li>because there is no disk in the drive,
<li>or because of other problems.
        </ol>

   <p>Multiple definitions are useful when using physical devices which are
only able to support one single disk geometry. 
Example:
<pre class="example">       drive a: file="/dev/fd0H1440" 1.44m
       drive a: file="/dev/fd0H720" 720k
</pre>
   <p>This instructs mtools to use /dev/fd0H1440 for 1.44m (high density)
disks and /dev/fd0H720 for 720k (double density) disks. On Linux, this
feature is not really needed, as the /dev/fd0 device is able to handle
any geometry.

   <p>You may also use multiple drive descriptions to access both of your
physical drives through one drive letter:

<pre class="example">       drive z: file="/dev/fd0"
       drive z: file="/dev/fd1"
</pre>
   <p>With this description, <code>mdir z:</code> accesses your first physical
drive if it contains a disk. If the first drive doesn't contain a disk,
mtools checks the second drive.

   <p>When using multiple configuration files, drive descriptions in the files
parsed last override descriptions for the same drive in earlier
files. In order to avoid this, use the <code>drive+</code> or <code>+drive</code>
keywords instead of <code>drive</code>. The first adds a description to the
end of the list (i.e. it will be tried last), and the first adds it to
the start of the list.

<div class="node">
<a name="parsing-order"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#old-style-configuration">old style configuration</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#per-drive-variables">per drive variables</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">3.6 Location of configuration files and parsing order</h3>

<p><a name="index-Parsing-order-120"></a><a name="index-Configuration-file-parsing-order-121"></a><a name="index-Configuration-file-name-_0028parsing-order_0029-122"></a><a name="index-Name-of-configuration-files-_0028parsing-order_0029-123"></a><a name="index-Location-of-configuration-files-_0028parsing-order_0029-124"></a>
The configuration files are parsed in the following order:
     <ol type=1 start=1>
<li>compiled-in defaults
<li><samp><span class="file">/etc/mtools.conf</span></samp>
<li><samp><span class="file">~/.mtoolsrc</span></samp>. 
<li><samp><span class="file">$MTOOLSRC</span></samp> (file pointed by the <code>MTOOLSRC</code> environmental
variable)
        </ol>

   <p>Options described in the later files override those described in the
earlier files. Drives defined in earlier files persist if they are not
overridden in the later files. For instance, drives A and B may be
defined in <samp><span class="file">/etc/mtools.conf</span></samp> and drives C and D may be
defined in <samp><span class="file">~/.mtoolsrc</span></samp> However, if <samp><span class="file">~/.mtoolsrc</span></samp> also
defines drive A, this new description would override the description of
drive A in <samp><span class="file">/etc/mtools.conf</span></samp> instead of adding to it. If
you want to add a new description to a drive already described in an
earlier file, you need to use either the <code>+drive</code> or <code>drive+</code>
keyword.

<div class="node">
<a name="old-style-configuration"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#parsing-order">parsing order</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Configuration">Configuration</a>

</div>

<h3 class="section">3.7 Backwards compatibility with old configuration file syntax</h3>

<p><a name="index-Backwards-compatibility-125"></a><a name="index-Old-configuration-file-syntax-126"></a><a name="index-Configuration-file_002c-old-syntax-127"></a>
The syntax described herein is new for version <code>mtools-3.0</code>. The
old line-oriented syntax is still supported. Each line beginning with a
single letter is considered to be a drive description using the old
syntax. Old style and new style drive sections may be mixed within the
same configuration file, in order to make upgrading easier. Support for
the old syntax will be phased out eventually, and in order to discourage
its use, I purposefully omit its description here.

<!-- MANskip 5 -->
<div class="node">
<a name="Commands"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Compiling-mtools">Compiling mtools</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Configuration">Configuration</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">4 Command list</h2>

<p><a name="index-Command-list-128"></a><a name="index-List-of-available-commands-129"></a>
 This section describes the available mtools commands, and the command
line parameters that each of them accepts. Options which are common to
all mtools commands are not described here, <a href="#arguments">arguments</a> for a
description of those.

<ul class="menu">
<li><a accesskey="1" href="#floppyd">floppyd</a>:            floppy daemon to run on your X server box
<li><a accesskey="2" href="#floppyd_005finstalltest">floppyd_installtest</a>:  small utility to check for the presence of floppyd
<li><a accesskey="3" href="#mattrib">mattrib</a>:            change MS-DOS file attribute flags
<li><a accesskey="4" href="#mbadblocks">mbadblocks</a>:         tests a floppy disk, and marks the bad blocks in the FAT
<li><a accesskey="5" href="#mcat">mcat</a>:               same as cat. Only useful with floppyd. 
<li><a accesskey="6" href="#mcd">mcd</a>:                change MS-DOS directory
<li><a accesskey="7" href="#mclasserase">mclasserase</a>:        erase memory card
<li><a accesskey="8" href="#mcopy">mcopy</a>:              copy MS-DOS files to/from Unix
<li><a accesskey="9" href="#mdel">mdel</a>:               delete an MS-DOS file
<li><a href="#mdeltree">mdeltree</a>:           recursively delete an MS-DOS directory
<li><a href="#mdir">mdir</a>:               display an MS-DOS directory
<li><a href="#mdu">mdu</a>:                list space occupied by directory and its contents
<li><a href="#mformat">mformat</a>:            add an MS-DOS file system to a low-level formatted floppy disk
<li><a href="#minfo">minfo</a>:              get information about an MS-DOS file system. 
<li><a href="#mlabel">mlabel</a>:             make an MS-DOS volume label
<li><a href="#mkmanifest">mkmanifest</a>:         makes a list of short name equivalents
<li><a href="#mmd">mmd</a>:                make an MS-DOS subdirectory
<li><a href="#mmount">mmount</a>:             mount an MS-DOS disk
<li><a href="#mpartition">mpartition</a>:         create an MS-DOS as a partition
<li><a href="#mrd">mrd</a>:                remove an MS-DOS subdirectory
<li><a href="#mmove">mmove</a>:              move or rename an MS-DOS file or subdirectory
<li><a href="#mren">mren</a>:               rename an existing MS-DOS file
<li><a href="#mshortname">mshortname</a>:         shows the short name of a file
<li><a href="#mshowfat">mshowfat</a>:           shows the FAT map of a file
<li><a href="#mtoolstest">mtoolstest</a>:         tests and displays the configuration
<li><a href="#mtype">mtype</a>:              display contents of an MS-DOS file
<li><a href="#mzip">mzip</a>:               zip disk specific commands
</ul>

<div class="node">
<a name="floppyd"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#floppyd_005finstalltest">floppyd_installtest</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Commands">Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.1 Floppyd</h3>

<p><a name="index-floppyd-130"></a><a name="index-X-terminal-131"></a><a name="index-remote-floppy-access-132"></a>
<code>Floppyd</code> is used as a server to grant access to the floppy drive
to clients running on a remote machine, just as an X server grants
access to the display to remote clients.  It has the following syntax:

   <p><code>floppyd</code> [<code>-d</code>] [<code>-l</code>] [<code>-s</code> <var>port</var>] [<code>-r</code>
<var>user</var>] [<code>-b</code> <var>ipaddr</var>] [<code>-x</code> <var>display</var>] <var>devicenames</var>

   <p><code>floppyd</code> is always associated with an X server.  It runs on the
same machine as its X server, and listens on port 5703 and above.

<h4 class="subsection">4.1.1 Authentication</h4>

<p><code>floppyd</code> authenticates remote clients using the <code>Xauthority</code>
protocol. Xhost authentication is not supported. Each floppyd is
associated with an X server.  When a remote client attempts to connect
to floppyd, it sends floppyd the X authority record corresponding to
floppyd's X server.  Floppyd in turn then tries to open up a connection
to the X server in order to verify the authenticity of the xauth record. 
If the connection to the X server succeeds, the client is granted
access. 
<code>DISPLAY</code>.

   <p><strong>Caution</strong>: In order to make authentication work correctly, the
local host should <strong>not</strong> be listed in the <code>xhost</code> list of
allowed hosts. 
 Indeed, hosts listed in <code>xhost</code> do not need a correct
<code>Xauthority</code> cookie to connect to the X server. As <code>floppyd</code>
runs on the same host as the X server, all its probe connection would
succeed even for clients who supplied a bad cookie.  This means that
your floppy drive would be open to the world, i.e. a huge security hole. 
 If your X server does not allow you to remove <code>localhost:0</code> and
<code>:0</code> from the <code>xhost</code> list, you can prevent floppyd from
probing those display names with the <code>-l</code> option.

<h4 class="subsection">4.1.2 Command line options</h4>

     <dl>
<dt><code>d</code><dd>Daemon mode. Floppyd runs its own server loop.  Do not supply this if
you start floppyd from <code>inetd.conf</code>
<br><dt><code>s  </code><var>port</var><dd>Port number for daemon mode.  Default is 5703 + <var>displaynumber</var>. 
This flag implies daemon mode.  For example, for display
<code>hitchhiker:5</code>, the port would be 5708. 
<br><dt><code>b  </code><var>ipaddr</var><dd>Bind address (for multi homed hosts). This flag implies daemon mode
<br><dt><code>r </code><var>user</var><dd>Run the server under as the given user
<br><dt><code>x </code><var>display</var><dd>X display to use for authentication. By default, this is taken from the
<code>DISPLAY</code> variable. If neither the <code>x</code> attribute is present
nor <code>DISPLAY</code> is set, floppyd uses <code>:0.0</code>. 
</dl>

   <p><var>devicenames</var> is a list of device nodes to be opened.  Default
is <code>/dev/fd0</code>. Multiple devices are only supported on mtools
versions newer than 3.9.11.

<h4 class="subsection">4.1.3 Connecting to floppyd</h4>

<p>In order to use floppyd, add the flag <code>remote</code> to the device
description in your <samp><span class="file">~/.mtoolsrc</span></samp> file.  If the flag <code>remote</code>
is given, the <code>file</code> parameter of the device description is taken
to be a remote address.  It's format is the following:
<var>hostname</var><code>:</code><var>displaynumber</var>[<code>/</code>[<var>baseport</var>][<code>/</code><var>drive</var>]]. When
using this entry, mtools connects to port
<var>baseport</var>+<var>displaynumber</var> at <var>hostname</var>. By default
<var>baseport</var> is 5703. The drive parameter is to distinguish among
multiple drives associated with a single display (only mtools versions
more recent than 3.9.11)

<h4 class="subsection">4.1.4 Examples:</h4>

<p>The following starts a floppy daemon giving access to <samp><span class="file">/dev/fd0</span></samp>,
listening on the default port 5703, tied to the default X servers:

<pre class="example">     floppyd -d /dev/fd0
</pre>
   <p>Each of the following starts a floppy daemon giving access to
<samp><span class="file">/dev/fd1</span></samp>, tied to the :1 local X servers, and listening on port
5704. We assume that the local host is named <code>hitchhiker</code>.

<pre class="example">     floppyd -d /dev/fd0
     floppyd -d -x :1 -p 5704 /dev/fd0
</pre>
   <p>If you want to start floppyd by <code>inetd</code> instead of running it as a
daemon, insert the following lines into <samp><span class="file">/etc/services</span></samp>:
<pre class="example">     # floppy daemon
     floppyd-0    5703/tcp    # floppy daemon for X server :0
     floppyd-1    5704/tcp    # floppy daemon for X server :1
</pre>
   <p>And insert the following into <samp><span class="file">/etc/inetd.conf</span></samp> (assuming that you
have defined a user named floppy in your <samp><span class="file">/etc/passwd</span></samp>):

<pre class="example">     # floppy daemon
     floppyd-0 stream  tcp  wait  floppy  /usr/sbin/floppyd floppyd /dev/fd0
     floppyd-1 stream  tcp  wait  floppy  /usr/sbin/floppyd floppyd -x :1 /dev/fd0
</pre>
   <p>Note that you need to supply the X display names for the second
floppyd.  This is because the port is opened by inetd.conf, and hence
floppyd cannot know its number to interfere the display number.

   <p>On the client side, insert the following into your <samp><span class="file">~/.mtoolsrc</span></samp>
to define a drive letter accessing floppy drive in your X terminal:
<pre class="example">     drive x: file="$DISPLAY" remote
</pre>
   <p>If your X terminal has more than one drive, you may access the
additional drives as follows:
<pre class="example">     drive y: file="$DISPLAY//1" remote
     drive z: file="$DISPLAY//2" remote
</pre>
   <div class="node">
<a name="floppyd_installtest"></a>
<a name="floppyd_005finstalltest"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mattrib">mattrib</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#floppyd">floppyd</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.2 Floppyd_installtest</h3>

<p><a name="index-floppyd_005finstalltest-133"></a><a name="index-X-terminal-134"></a><a name="index-remote-floppy-access-135"></a>
<code>Floppyd_installtest</code> is used to check for the presence of a running
floppyd daemon. This is useful, if you have a small front-end script to
mtools, which decides whether to use floppyd or not.

   <p><code>floppyd_installtest</code> [<code>-f</code>]  Connect-String

   <p>If the <code>-f</code> option is specified, <code>floppyd_installtest</code> does a
full X-Cookie authentication and complains if this does not work.

   <p>The connect-String has the format described in the floppyd-section:
<var>hostname</var><code>:</code><var>displaynumber</var>[<code>/</code><var>baseport</var>]

<div class="node">
<a name="mattrib"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mbadblocks">mbadblocks</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#floppyd_005finstalltest">floppyd_installtest</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.3 Mattrib</h3>

<p><a name="index-mattrib-136"></a><a name="index-Changing-file-attributes-137"></a><a name="index-Hidden-files-138"></a><a name="index-Read_002donly-files-_0028changing-the-attribute_0029-139"></a><a name="index-System-files-140"></a><a name="index-Archive-bit-141"></a>
<code>Mattrib</code> is used to change MS-DOS file attribute flags. It has the
following syntax:

   <p><code>mattrib</code> [<code>-a|+a</code>] [<code>-h|+h</code>] [<code>-r|+r</code>]
[<code>-s|+s</code>] [<code>-/</code>]  [<code>-p</code>] [<code>-X</code>] <var>msdosfile</var> [ <var>msdosfiles</var> <small class="dots">...</small> ]

   <p><code>Mattrib</code> adds attribute flags to an MS-DOS file (with the
`<code>+</code>' operator) or remove attribute flags (with the `<code>-</code>'
operator).

   <p><code>Mattrib</code> supports the following attribute bits:

     <dl>
<dt><code>a</code><dd>Archive bit.  Used by some backup programs to indicate a new file. 
<br><dt><code>r</code><dd>Read-only bit.  Used to indicate a read-only file.  Files with this bit
set cannot be erased by <code>DEL</code> nor modified. 
<br><dt><code>s</code><dd>System bit.  Used by MS-DOS to indicate a operating system file. 
<br><dt><code>h</code><dd>Hidden bit.  Used to make files hidden from <code>DIR</code>. 
</dl>

   <p><code>Mattrib</code> supports the following command line flags:
     <dl>
<dt><code>/</code><dd>Recursive.  Recursively list the attributes of the files in the subdirectories. 
<br><dt><code>X</code><dd>Concise. Prints the attributes without any whitespace padding.  If
neither the "/" option is given, nor the <var>msdosfile</var> contains a
wildcard, and there is only one MS-DOS file parameter on the command
line, only the attribute is printed, and not the filename.  This option
is convenient for scripts
<br><dt><code>p</code><dd>Replay mode.  Outputs a series of mformat commands that will reproduce
the current situation, starting from a situation as left by untarring
the MS-DOS file system.  Commands are only output for attribute settings
that differ from the default (archive bit set for files, unset for
directories).  This option is intended to be used in addition to
tar. The <code>readonly</code> attribute is not taken into account, as tar can
set that one itself. 
</dl>

<div class="node">
<a name="mbadblocks"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mcat">mcat</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mattrib">mattrib</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.4 Mbadblocks</h3>

<p><a name="index-mbadblocks-142"></a><a name="index-Marking-blocks-as-bad-143"></a><a name="index-Bad-blocks-144"></a><a name="index-Read-errors-145"></a>
The <code>mbadblocks</code> command is used to mark some clusters on an
MS-DOS filesystem bad. It has the following syntax:

   <p><code>mbadblocks</code> [<code>-s</code> <var>sectorlist</var>|<code>-c</code> <var>clusterlist</var>|-w] <var>drive</var><code>:</code>

   <p>If no command line flags are supplied, <code>Mbadblocks</code> scans an
MS-DOS filesystem for bad blocks by simply trying to read them and
flag them if read fails. All blocks that are unused are scanned, and
if detected bad are marked as such in the FAT.

   <p>This command is intended to be used right after <code>mformat</code>.  It is
not intended to salvage data from bad disks.

<h4 class="subsection">4.4.1 Command line options</h4>

     <dl>
<dt><code>c </code><var>file</var><dd>Use a list of bad clusters, rather than scanning for bad clusters
itself. 
<br><dt><code>s </code><var>file</var><dd>Use a list of bad sectors (counted from beginning of filesystem),
rather than trying for bad clusters itself. 
<br><dt><code>w</code><dd>Write a random pattern to each cluster, then read it back and flag
cluster as bad if mismatch. Only free clusters are tested in such a
way, so any file data is preserved. 
</dl>

<h4 class="subsection">4.4.2 Bugs</h4>

<p><code>Mbadblocks</code> should (but doesn't yet :-( ) also try to salvage bad
blocks which are in use by reading them repeatedly, and then mark them
bad.

<div class="node">
<a name="mcat"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mcd">mcd</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mbadblocks">mbadblocks</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.5 Mcat</h3>

<p>The <code>mcat</code> command is used to copy an entire disk image from or
to the floppy device. It uses the following syntax:

   <p><code>mcat</code> [<code>-w</code>] <var>drive</var><code>:</code>
<a name="index-mcat-146"></a><a name="index-Copying-an-entire-disk-image-147"></a><a name="index-Disk-image-148"></a><a name="index-Floppyd-cat-149"></a>
<code>Mcat</code> performs the same task as the Unix <code>cat</code> command. It
is included into the mtools package, since <code>cat</code> cannot access
remote floppy devices offered by the mtools floppy daemon. 
Now it is possible to create boot floppies remotely.

   <p>The default operation is reading. The output is written to stdout.

   <p>If the <code>-w</code> option is specified, mcat reads a disk-image from
stdin and writes it to the given device. 
<strong>Use this carefully!</strong> Because of the low-level nature of this
command, it will happily destroy any data written before on the
disk without warning!

<div class="node">
<a name="mcd"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mclasserase">mclasserase</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mcat">mcat</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.6 Mcd</h3>

<p><a name="index-mcd-150"></a><a name="index-Directory-_0028changing_0029-151"></a><a name="index-Working-directory-152"></a><a name="index-Current-working-directory-_0028changing-the_0029-153"></a><a name="index-Default-directory-_0028changing-the_0029-154"></a><a name="index-Mcwd-file-155"></a>
The <code>mcd</code> command is used to change the mtools working directory
on the MS-DOS disk. It uses the following syntax:

<pre class="example">     <code>mcd</code> [<var>msdosdirectory</var>]
</pre>
   <p>Without arguments, <code>mcd</code> reports the current device and working
directory.  Otherwise, <code>mcd</code> changes the current device and current
working directory relative to an MS-DOS file system.

   <p>The environmental variable <code>MCWD</code> may be used to locate the file
where the device and current working directory information is stored. 
The default is <samp><span class="file">$HOME/.mcwd</span></samp>.  Information in this file is ignored
if the file is more than 6 hours old.

   <p><code>Mcd</code> returns 0 on success or 1 on failure.

   <p>Unlike MS-DOS versions of <code>CD</code>, <code>mcd</code> can be used to change to
another device. It may be wise to remove old <samp><span class="file">.mcwd</span></samp> files at logout.

<div class="node">
<a name="mclasserase"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mcopy">mcopy</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mcd">mcd</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.7 Mclasserase</h3>

<p><a name="index-mclasserase-156"></a><a name="index-Memory-Card-157"></a><a name="index-Physically-erase-158"></a>
The <code>mclasserase</code> command is used to wipe memory cards by
overwriting it three times: first with <code>0xff</code>, then with
<code>0x00</code>, then with <code>0xff</code> again. The command uses the following
syntax:

<pre class="example">     <code>mclasserase</code> [<code>-d</code>] <var>msdosdrive</var>
</pre>
   <p>MS-DOS drive is optional, if none is specified, use <code>A:</code>. If more than
one drive are specified, all but the last are ignored.

   <p><code>Mclasserase</code> accepts the following command line options:

     <dl>
<dt><code>d</code><dd>Stop after each erase cycle, for testing purposes
<br><dt><code>p</code><dd>Not yet implemented
</dl>

   <p><code>Mclasserase</code> returns 0 on success or -1 on failure.

<div class="node">
<a name="mcopy"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mdel">mdel</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mclasserase">mclasserase</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.8 Mcopy</h3>

<p><a name="index-mcopy-159"></a><a name="index-Reading-MS_002dDOS-files-160"></a><a name="index-Writing-MS_002dDOS-files-161"></a><a name="index-Copying-MS_002dDOS-files-162"></a><a name="index-Concatenating-MS_002dDOS-files-163"></a><a name="index-Text-files-164"></a><a name="index-CR_002fLF-conversions-165"></a>
The <code>mcopy</code> command is used to copy MS-DOS files to and from
Unix. It uses the following syntax:

<pre class="example">     <code>mcopy</code> [<code>-bspanvmQT</code>] [<code>-D</code> <var>clash_option</var>] <var>sourcefile</var> <var>targetfile</var>
     <code>mcopy</code> [<code>-bspanvmQT</code>] [<code>-D</code> <var>clash_option</var>] <var>sourcefile</var> [ <var>sourcefiles</var>... ] <var>targetdirectory</var>
     <code>mcopy</code> [<code>-tnvm</code>] <var>MSDOSsourcefile</var>
</pre>
   <p><code>Mcopy</code> copies the specified file to the named file, or copies
multiple files to the named directory.  The source and target can be
either MS-DOS or Unix files.

   <p>The use of a drive letter designation on the MS-DOS files, 'a:' for
example, determines the direction of the transfer.  A missing drive
designation implies a Unix file whose path starts in the current
directory.  If a source drive letter is specified with no attached file
name (e.g. <code>mcopy a: .</code>), all files are copied from that drive.

   <p>If only a single, MS-DOS source parameter is provided (e.g. "mcopy
a:foo.exe"), an implied destination of the current directory
(`<code>.</code>') is assumed.

   <p>A filename of `<code>-</code>' means standard input or standard output, depending
on its position on the command line.

   <p><code>Mcopy</code> accepts the following command line options:

     <dl>
<dt><code>t</code><dd>Text file transfer.  Mcopy translates incoming carriage return/line
feeds to line feeds when copying from MS-DOS to Unix, and vice-versa when
copying from Unix to MS-DOS. 
<br><dt><code>b</code><dd>Batch mode. Optimized for huge recursive copies, but less secure if a
crash happens during the copy. 
<br><dt><code>s</code><dd>Recursive copy.  Also copies directories and their contents
<br><dt><code>p</code><dd>Preserves the attributes of the copied files
<br><dt><code>Q</code><dd>When mcopying multiple files, quits as soon as one copy fails (for
example due to lacking storage space on the target disk)
<br><dt><code>a</code><dd>Text (ASCII) file transfer.  <code>ASCII</code> translates incoming carriage
return/line feeds to line feeds. 
<br><dt><code>T</code><dd>Text (ASCII) file transfer with character set conversion.  Differs from
<code>-a</code> in the <code>ASCII</code> also translates incoming PC-8 characters
to ISO-8859-1 equivalents as far as possible.  When reading DOS files,
untranslatable characters are replaced by '<code>#</code>'; when writing DOS files,
untranslatable characters are replaced by '<code>.</code>'. 
<br><dt><code>n</code><dd>No confirmation when overwriting Unix files.  <code>ASCII</code> doesn't warn
the user when overwriting an existing Unix file. If the target file already exists,
and the <code>-n</code> option is not in effect, <code>mcopy</code> asks whether to
overwrite the file or to rename the new file (<a href="#name-clashes">name clashes</a>) for
details).  In order to switch off confirmation for DOS files, use <code>-o</code>. 
<br><dt><code>m</code><dd>Preserve the file modification time. 
<br><dt><code>v</code><dd>Verbose. Displays the name of each file as it is copied. 
</dl>

<h4 class="subsection">4.8.1 Bugs</h4>

<p>Unlike MS-DOS, the '+' operator (append) from MS-DOS is not
supported. However, you may use <code>mtype</code> to produce the same effect:
<pre class="example">     mtype a:file1 a:file2 a:file3 &gt;unixfile
     mtype a:file1 a:file2 a:file3 | mcopy - a:msdosfile
</pre>
   <div class="node">
<a name="mdel"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mdeltree">mdeltree</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mcopy">mcopy</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.9 Mdel</h3>

<p><a name="index-mdel-166"></a><a name="index-removing-MS_002dDOS-files-167"></a><a name="index-erasing-MS_002dDOS-files-168"></a><a name="index-deleting-MS_002dDOS-files-169"></a>
The <code>mdel</code> command is used to delete an MS-DOS file. Its syntax
is:

<pre class="display">     <code>mdel</code> [<code>-v</code>] <var>msdosfile</var> [ <var>msdosfiles</var> <small class="dots">...</small>  ]
</pre>
   <p><code>Mdel</code> deletes files on an MS-DOS file system.

   <p><code>Mdel</code> asks for verification prior to removing a read-only file.

<div class="node">
<a name="mdeltree"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mdir">mdir</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mdel">mdel</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.10 Mdeltree</h3>

<p><a name="index-mdeltree-170"></a><a name="index-removing-an-MS_002dDOS-directory-recursively-171"></a><a name="index-erasing-an-MS_002dDOS-directory-recursively-172"></a><a name="index-deleting-an-MS_002dDOS-directory-recursively-173"></a><a name="index-recursively-removing-an-MS_002dDOS-directory-174"></a>
The <code>mdeltree</code> command is used to delete an MS-DOS file. Its syntax
is:

<pre class="display">     <code>mdeltree</code> [<code>-v</code>] <var>msdosdirectory</var> [<var>msdosdirectories</var><small class="dots">...</small>]
</pre>
   <p><code>Mdeltree</code> removes a directory and all the files and subdirectories
it contains from an MS-DOS file system. An error occurs if the directory
to be removed does not exist.

<div class="node">
<a name="mdir"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mdu">mdu</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mdeltree">mdeltree</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.11 Mdir</h3>

<p><a name="index-mdir-175"></a><a name="index-Read_002donly-files-_0028listing-them_0029-176"></a><a name="index-Listing-a-directory-177"></a><a name="index-Directory-listing-178"></a>
The <code>mdir</code> command is used to display an MS-DOS directory. Its
syntax is:

   <p><code>mdir</code> [<code>-/</code>] [<code>-f</code>] [<code>-w</code>] [<code>-a</code>] [<code>-b</code>] <var>msdosfile</var> [ <var>msdosfiles</var><small class="dots">...</small>]

   <p><code>Mdir</code>
displays the contents of MS-DOS directories, or the entries for some
MS-DOS files.

   <p><code>Mdir</code> supports the following command line options:

     <dl>
<dt><code>/</code><dd>Recursive output, just like MS-DOS' <code>-s</code> option
<br><dt><code>w</code><dd>Wide output.  With this option, <code>mdir</code> prints the filenames across
the page without displaying the file size or creation date. 
<br><dt><code>a</code><dd>Also list hidden files. 
<br><dt><code>f</code><dd>Fast.  Do not try to find out free space.  On larger disks, finding out
the amount of free space takes up some non trivial amount of time, as
the whole FAT must be read in and scanned.  The <code>-f</code> flag bypasses
this step.  This flag is not needed on FAT32 file systems, which store
the size explicitly. 
<br><dt><code>b</code><dd>Concise listing. Lists each directory name or filename, one per line
(including the filename extension). This switch displays no heading
information and no summary. Only a newline separated list of pathnames
is displayed. 
</dl>

   <p>An error occurs if a component of the path is not a directory.

<div class="node">
<a name="mdu"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mformat">mformat</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mdir">mdir</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.12 Mdu</h3>

<p><a name="index-mdu-179"></a><a name="index-Space-occupied-by-directories-and-files-180"></a><a name="index-du-181"></a><a name="index-Listing-space-occupied-by-directories-and-files-182"></a><a name="index-Occupation-of-space-by-directories-and-files-183"></a>
<code>Mdu</code> is used to list the space occupied by a directory, its
subdirectories and its files. It is similar to the <code>du</code> command on
Unix.  The unit used are clusters.  Use the minfo command to find out
the cluster size.

   <p><code>mdu</code> [<code>-a</code>] [ <var>msdosfiles</var> <small class="dots">...</small> ]

     <dl>
<dt><code>a</code><dd>All files.  List also the space occupied for individual files. 
<br><dt><code>s</code><dd>Only list the total space, don't give details for each subdirectory. 
</dl>

<div class="node">
<a name="mformat"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mkmanifest">mkmanifest</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mdu">mdu</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.13 Mformat</h3>

<p><a name="index-mformat-184"></a><a name="index-Initializing-disks-185"></a><a name="index-Formatting-disks-186"></a><a name="index-File-system-creation-187"></a>
The <code>mformat</code> command is used to add an MS-DOS file system to a
low-level formatted diskette. Its syntax is:

<pre class="display">     <code>mformat</code> [<code>-t</code> <var>cylinders</var>|<code>-T</code> <var>tot_sectors</var>] [<code>-h</code> <var>heads</var>] [<code>-s</code> <var>sectors</var>]
       [<code>-f</code> <var>size</var>] [<code>-1</code>] [<code>-4</code>] [<code>-8</code>]
       [<code>-v</code> <var>volume_label</var>]
       [<code>-F</code>] [<code>-S</code> <var>sizecode</var>]
       [<code>-M</code> <var>software_sector_size</var>]
       [<code>-N</code> <var>serial_number</var>] [<code>-a</code>]
       [<code>-C</code>] [<code>-H</code> <var>hidden_sectors</var>] [<code>-I</code> <var>fsVersion</var>]
       [<code>-r</code> <var>root_sectors</var>] [<code>-L</code> <var>fat_len</var>]
       [<code>-B</code> <var>boot_sector</var>] [<code>-k</code>]
       [<code>-m</code> <var>media_descriptor</var>]
       [<code>-K</code> <var>backup_boot</var>]
       [<code>-c</code> <var>clusters_per_sector</var>]
       [<code>-d</code> <var>fat_copies</var>]
       [<code>-X</code>] [<code>-2</code> <var>sectors_on_track_0</var>] [<code>-3</code>]
       [<code>-0</code> <var>rate_on_track_0</var>] [<code>-A</code> <var>rate_on_other_tracks</var>]
       <var>drive:</var>
</pre>
   <p><code>Mformat</code> adds a minimal MS-DOS file system (boot sector, FAT, and
root directory) to a diskette that has already been formatted by a Unix
low-level format.

   <p>The following options are supported: (The S, 2, 1 and M options may not
exist if this copy of mtools has been compiled without the USE_2M
option)

   <p>The following options are the same as for MS-DOS's format command:

<!-- xMANoptions -->
     <dl>
<dt><code>v</code><dd>Specifies the volume label. A volume label identifies the disk and can
be a maximum of 11 characters. If you omit the -v switch, mformat will
assign no label to the disk. 
<br><dt><code>f</code><dd>Specifies the size of the DOS file system to format. Only a certain
number of predefined sizes are supported by this flag; for others use
the -h/-t/-s flags. The following sizes are supported:
          <dl>
<dt>160<dd>160K, single-sided, 8 sectors per track, 40 cylinders (for 5 1/4 DD)
<br><dt>180<dd>160K, single-sided, 9 sectors per track, 40 cylinders (for 5 1/4 DD)
<br><dt>320<dd>320K, double-sided, 8 sectors per track, 40 cylinders (for 5 1/4 DD)
<br><dt>360<dd>360K, double-sided, 9 sectors per track, 40 cylinders (for 5 1/4 DD)
<br><dt>720<dd>720K, double-sided, 9 sectors per track, 80 cylinders (for 3 1/2 DD)
<br><dt>1200<dd>1200K, double-sided, 15 sectors per track, 80 cylinders (for 5 1/4 HD)
<br><dt>1440<dd>1440K, double-sided, 18 sectors per track, 80 cylinders (for 3 1/2 HD)
<br><dt>2880<dd>2880K, double-sided, 36 sectors per track, 80 cylinders (for 3 1/2 ED)
</dl>

     <br><dt><code>t</code><dd>Specifies the number of tracks on the disk. 
<br><dt><code>T</code><dd>Specifies the number of total sectors on the disk. Only one of these 2
options may be specified (tracks or total sectors)
<br><dt><code>h</code><dd>The number of heads (sides). 
<br><dt><code>s</code><dd>Specifies the number of sectors per track. If the 2m option is given,
number of 512-byte sector equivalents on generic tracks (i.e. not head 0
track 0).  If the 2m option is not given, number of physical sectors per
track (which may be bigger than 512 bytes).

     <br><dt><code>1</code><dd>Formats a single side (equivalent to -h 1)

     <br><dt><code>4</code><dd>Formats a 360K double-sided disk (equivalent to -f 360). When used
together with -the 1 switch, this switch formats a 180K disk

     <br><dt><code>8</code><dd>Formats a disk with 8 sectors per track.

   </dl>

   <p>MS-DOS format's <code>q</code>, <code>u</code> and <code>b</code> options are not
supported, and <code>s</code> has a different meaning.

   <p>The following options are specific to mtools:

     <dl>
<dt><code>F</code><dd>Format the partition as FAT32.

     <br><dt><code>S</code><dd>The size code. The size of the sector is 2 ^ (sizecode + 7). 
<br><dt><code>X</code><dd>formats the disk as an XDF disk. See <a href="#XDF">XDF</a>, for more details. The disk
has first to be low-level formatted using the xdfcopy utility included
in the fdutils package. XDF disks are used for instance for OS/2 install
disks. 
<br><dt><code>2</code><dd>2m format. The parameter to this option describes the number of
sectors on track 0, head 0. This option is recommended for sectors
bigger than normal. 
<br><dt><code>3</code><dd>don't use a 2m format, even if the current geometry of the disk is a 2m
geometry. 
<br><dt><code>0</code><dd>Data transfer rate on track 0
<br><dt><code>A</code><dd>Data transfer rate on tracks other than 0
<br><dt><code>M</code><dd>software sector size. This parameter describes the sector size in bytes used
by the MS-DOS file system. By default it is the physical sector size. 
<br><dt><code>N</code><dd>Uses the requested serial number, instead of generating one
automatically
<br><dt><code>a</code><dd>If this option is given, an Atari style serial number is generated. 
Ataris store their serial number in the OEM label. 
<br><dt><code>C</code><dd>creates the disk image file to install the MS-DOS file system on
it. Obviously, this is useless on physical devices such as floppies
and hard disk partitions, but is interesting for image files. 
<br><dt><code>H</code><dd>number of hidden sectors. This parameter is useful for formatting hard
disk partition, which are not aligned on track boundaries (i.e. first
head of first track doesn't belong to the partition, but contains a
partition table). In that case the number of hidden sectors is in
general the number of sectors per cylinder. This is untested. 
<br><dt><code>I</code><dd>Sets the fsVersion id when formatting a FAT32 drive.  In order to find
this out, run minfo on an existing FAT32 drive, and mail me about it, so
I can include the correct value in future versions of mtools. 
<br><dt><code>c</code><dd>Sets the size of a cluster (in sectors).  If this cluster size would
generate a FAT that too big for its number of bits, mtools automatically
increases the cluster size, until the FAT is small enough. 
<br><dt><code>d</code><dd>Sets the number of FAT copies. Default is 2. This setting can also be
specified using the <code>MTOOLS_NFATS</code> environment variable. 
<br><dt><code>r</code><dd>Sets the size of the root directory (in sectors).  Only applicable to 12
and 16 bit FATs. This setting can also be specified using the
<code>MTOOLS_DIR_LEN</code> environment variable. 
<br><dt><code>L</code><dd>Sets the length of the FAT. 
<br><dt><code>B</code><dd>Use the boot sector stored in the given file or device, instead of using
its own.  Only the geometry fields are updated to match the target disks
parameters. 
<br><dt><code>k</code><dd>Keep the existing boot sector as much as possible.  Only the geometry
fields and other similar file system data are updated to match the target
disks parameters. 
<br><dt><code>K</code><dd>Sets the sector number where the backup of the boot sector should be
stored (only relevant on FAT32).

     <br><dt><code>m</code><dd>Use a non-standard media descriptor byte for this disk. The media
descriptor is stored at position 21 of the boot sector, and as first
byte in each FAT copy. Using this option may confuse DOS or older mtools
version, and may make the disk unreadable. Only use if you know what you
are doing.

   </dl>

   <p>To format a diskette at a density other than the default, you must supply
(at least) those command line parameters that are different from the
default.

   <p><code>Mformat</code> returns 0 on success or 1 on failure.

   <p>It doesn't record bad block information to the Fat, use
<code>mbadblocks</code> for that.

<div class="node">
<a name="mkmanifest"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#minfo">minfo</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mformat">mformat</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.14 Mkmanifest</h3>

<p><a name="index-mkmanifest-188"></a><a name="index-packing-list-189"></a>
The <code>mkmanifest</code> command is used to create a shell script (packing
list) to restore Unix filenames. Its syntax is:

   <p><code>mkmanifest</code> [ <var>files</var> ]

   <p><code>Mkmanifest</code> creates a shell script that aids in the restoration of
Unix filenames that got clobbered by the MS-DOS filename restrictions. 
MS-DOS filenames are restricted to 8 character names, 3 character
extensions, upper case only, no device names, and no illegal characters.

   <p>The mkmanifest program is compatible with the methods used in
<code>pcomm, arc,</code> and <code>mtools</code> to change perfectly good Unix
filenames to fit the MS-DOS restrictions. This command is only useful if
the target system which will read the diskette cannot handle VFAT long
names.

<h4 class="subsection">4.14.1 Example</h4>

<p>You want to copy the following Unix files to a MS-DOS diskette (using the
<code>mcopy</code> command).

<pre class="example">       very_long_name
       2.many.dots
       illegal:
       good.c
       prn.dev
       Capital
</pre>
   <p><code>ASCII</code>
converts the names to:

<pre class="example">       very_lon
       2xmany.dot
       illegalx
       good.c
       xprn.dev
       capital
</pre>
   <p>The command:
<pre class="example">     mkmanifest very_long_name 2.many.dots illegal: good.c prn.dev Capital &gt;manifest
</pre>
   <p>would produce the following:
<pre class="example">       mv very_lon very_long_name
       mv 2xmany.dot 2.many.dots
       mv illegalx illegal:
       mv xprn.dev prn.dev
       mv capital Capital
</pre>
   <p>Notice that "good.c" did not require any conversion, so it did not
appear in the output.

   <p>Suppose I've copied these files from the diskette to another Unix
system, and I now want the files back to their original names.  If the
file "manifest" (the output captured above) was sent along with those
files, it could be used to convert the filenames.

<h4 class="subsection">4.14.2 Bugs</h4>

<p>The short names generated by <code>mkmanifest</code> follow the old convention
(from mtools-2.0.7) and not the one from Windows 95 and mtools-3.0.

<div class="node">
<a name="minfo"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mlabel">mlabel</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mkmanifest">mkmanifest</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.15 Minfo</h3>

<p><a name="index-minfo-190"></a><a name="index-mformat-parameters-191"></a><a name="index-getting-parameters-of-a-MS_002dDOS-file-system-192"></a>
The <code>minfo</code> command prints the parameters of a MS-DOS file system, such
as number of sectors, heads and cylinders.  It also prints an mformat
command line which can be used to create a similar MS-DOS file system on
another media.  However, this doesn't work with 2m or XDF media, and
with MS-DOS 1.0 file systems
<pre class="display">     <code>minfo</code> <var>drive</var>:
</pre>
   <p>Minfo supports the following option:
     <dl>
<dt><code>v</code><dd>Prints a hexdump of the boot sector, in addition to the other information
</dl>

<div class="node">
<a name="mlabel"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mmd">mmd</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#minfo">minfo</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.16 Mlabel</h3>

<p><a name="index-mlabel-193"></a><a name="index-Labeling-a-disk-194"></a><a name="index-Disk-label-195"></a>
The <code>mlabel</code> command adds a volume label to a disk. Its syntax is:
<pre class="display">     <code>mlabel</code> [<code>-vcsn</code>] [<code>-N</code> <var>serial</var>] <var>drive</var>:[<var>new_label</var>]
</pre>
   <p><code>Mlabel</code> displays the current volume label, if present. If
<var>new_label</var> is not given, and if neither the <code>c</code> nor the
<code>s</code> options are set, it prompts the user for a new volume label. 
To delete an existing volume label, press return at the prompt.

   <p>The label is limited to 11 single-byte characters,
e.g. <code>Name1234567</code>.

   <p>Reasonable care is taken to create a valid MS-DOS volume label.  If an
invalid label is specified, <code>mlabel</code> changes the label (and
displays the new label if the verbose mode is set). <code>Mlabel</code>
returns 0 on success or 1 on failure.

   <p>Mlabel supports the following options:
     <dl>
<dt><code>c</code><dd>Clears an existing label, without prompting the user
<br><dt><code>s</code><dd>Shows the existing label, without prompting the user. 
<br><dt><code>n</code><dd>Assigns a new (random) serial number to the disk
<br><dt><code>N </code><var>serial</var><dd>Sets the supplied serial number. The serial number should be supplied as
an 8 digit hexadecimal number, without spaces
</dl>

<div class="node">
<a name="mmd"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mmount">mmount</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mlabel">mlabel</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.17 Mmd</h3>

<p><a name="index-mmd-196"></a><a name="index-Making-a-directory-197"></a><a name="index-Creating-a-directory-198"></a><a name="index-Directory-creation-199"></a><a name="index-Subdirectory-creation-200"></a>
The <code>mmd</code> command is used to make an MS-DOS subdirectory. Its
syntax is:

   <p><code>mmd</code> [<code>-D</code> <var>clash_option</var>] <var>msdosdirectory</var> [
<var>msdosdirectories</var><small class="dots">...</small> ]

   <p><code>Mmd</code> makes a new directory on an MS-DOS file system. An error occurs
if the directory already exists.

<div class="node">
<a name="mmount"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mmove">mmove</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mmd">mmd</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.18 Mmount</h3>

<p><a name="index-mmount-201"></a><a name="index-Linux-enhancements-_0028mmount_0029-202"></a><a name="index-Mounting-a-disk-203"></a><a name="index-High-capacity-formats_002c-mounting-204"></a>
The <code>mmount</code> command is used to mount an MS-DOS disk. It is only
available on Linux, as it is only useful if the OS kernel allows to
configure the disk geometry. Its syntax is:

   <p><code>mmount</code> <var>msdosdrive</var> [<var>mountargs</var>]

   <p><code>Mmount</code>
reads the boot sector of an MS-DOS disk, configures the drive geometry,
and finally mounts it passing
<code>mountargs</code> to <code>mount. </code>
If no mount arguments are specified, the name of the device is
used. If the disk is write protected, it is automatically mounted read
only.

<div class="node">
<a name="mmove"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mpartition">mpartition</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mmount">mmount</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.19 Mmove</h3>

<p><a name="index-mmove-205"></a><a name="index-Moving-files-_0028mmove_0029-206"></a><a name="index-Renaming-files-_0028mmove_0029-207"></a>
The <code>mmove</code> command is used to moves or renames an existing MS-DOS
file or subdirectory.
<pre class="display">     <code>mmove</code> [<code>-v</code>] [<code>-D</code> <var>clash_option</var>] <var>sourcefile</var> <var>targetfile</var>
     <code>mmove</code> [<code>-v</code>]  [<code>-D</code> <var>clash_option</var>] <var>sourcefile</var> [ <var>sourcefiles</var><small class="dots">...</small> ] <var>targetdirectory</var>
</pre>
   <p><code>Mmove</code> moves or renames an existing MS-DOS file or
subdirectory. Unlike the MS-DOS version of <code>MOVE</code>, <code>mmove</code> is
able to move subdirectories.  Files or directories can only be moved
within one file system. Data cannot be moved from MS-DOS to Unix or
vice-versa.  If you omit the drive letter from the target file or
directory, the same letter as for the source is assumed.  If you omit
the drive letter from all parameters, drive a: is assumed by default.

<div class="node">
<a name="mpartition"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mrd">mrd</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mmove">mmove</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.20 Mpartition</h3>

<p><a name="index-mpartition-208"></a><a name="index-partitions-_0028creating_0029-209"></a><a name="index-Zip-disks-_0028partitioning-them_0029-210"></a><a name="index-Jaz-disks-_0028partitioning-them_0029-211"></a>
The <code>mpartition</code> command is used to create MS-DOS file systems as
partitions.  This is intended to be used on non-Linux systems,
i.e. systems where fdisk and easy access to SCSI devices are not
available.  This command only works on drives whose partition variable
is set.

<pre class="display">     <code>mpartition</code> <code>-p</code> <var>drive</var>
     <code>mpartition</code> <code>-r</code> <var>drive</var>
     <code>mpartition</code> <code>-I</code> [<code>-B</code> <var>bootSector</var>] <var>drive</var>
     <code>mpartition</code> <code>-a</code> <var>drive</var>
     <code>mpartition</code> <code>-d</code> <var>drive</var>
     <code>mpartition</code> <code>-c</code> [<code>-s</code> <var>sectors</var>] [<code>-h</code> <var>heads</var>]
     [<code>-t</code> <var>cylinders</var>] [<code>-v</code> [<code>-T</code> <var>type</var>] [<code>-b</code>
     <var>begin</var>] [<code>-l</code> length] [<code>-f</code>]
     
</pre>
   <p>Mpartition supports the following operations:

     <dl>
<dt><code>p</code><dd>Prints a command line to recreate the partition for the drive.  Nothing
is printed if the partition for the drive is not defined, or an
inconsistency has been detected.  If verbose (<code>-v</code>) is also set,
prints the current partition table. 
<br><dt><code>r</code><dd>Removes the partition described by <var>drive</var>. 
<br><dt><code>I</code><dd>Initializes the partition table, and removes all partitions. 
<br><dt><code>c</code><dd>Creates the partition described by <var>drive</var>. 
<br><dt><code>a</code><dd>"Activates" the partition, i.e. makes it bootable.  Only one partition
can be bootable at a time. 
<br><dt><code>d</code><dd>"Deactivates" the partition, i.e. makes it unbootable. 
</dl>

   <p>If no operation is given, the current settings are printed.

   <p>For partition creations, the following options are available:
     <dl>
<dt><code>s </code><var>sectors</var><dd>The number of sectors per track of the partition (which is also the
number of sectors per track for the whole drive). 
<br><dt><code>h </code><var>heads</var><dd>The number of heads of the partition (which is also the number of heads
for the whole drive).  By default, the geometry information (number of
sectors and heads) is figured out from neighboring partition table
entries, or guessed from the size. 
<br><dt><code>t </code><var>cylinders</var><dd>The number of cylinders of the partition (not the number of cylinders of
the whole drive. 
<br><dt><code>b </code><var>begin</var><dd>The starting offset of the partition, expressed in sectors. If begin is
not given, mpartition lets the partition begin at the start of the disk
(partition number 1), or immediately after the end of the previous
partition. 
<br><dt><code>l </code><var>length</var><dd>The size (length) of the partition, expressed in sectors.  If end is not
given, mpartition figures out the size from the number of sectors, heads
and cylinders.  If these are not given either, it gives the partition
the biggest possible size, considering disk size and start of the next
partition. 
</dl>

   <p>The following option is available for all operation which modify the
partition table:
     <dl>
<dt><code>f</code><dd>Usually, before writing back any changes to the partition, mpartition
performs certain consistency checks, such as checking for overlaps and
proper alignment of the partitions.  If any of these checks fails, the
partition table is not changes.  The <code>-f</code> allows you to override
these safeguards. 
</dl>

   <p>The following options are available for all operations:
     <dl>
<dt><code>v</code><dd>Together with <code>-p</code> prints the partition table as it is now (no
change operation), or as it is after it is modified. 
<br><dt><code>vv</code><dd>If the verbosity flag is given twice, mpartition will print out a
hexdump of the partition table when reading it from and writing it to
the device. 
</dl>

   <p>The following option is available for partition table initialization:
     <dl>
<dt><code>B </code><var>bootSector</var><dd>Reads the template master boot record from file <var>bootSector</var>. 
</dl>

<div class="node">
<a name="mrd"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mren">mren</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mpartition">mpartition</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.21 Mrd</h3>

<p><a name="index-mrd-212"></a><a name="index-Removing-a-directory-213"></a><a name="index-Erasing-a-directory-214"></a><a name="index-Deleting-a-directory-215"></a><a name="index-Directory-removing-216"></a><a name="index-Subdirectory-removing-217"></a>
The <code>mrd</code> command is used to remove an MS-DOS subdirectory. Its
syntax is:

<pre class="display">     <code>mrd</code> [<code>-v</code>] <var>msdosdirectory</var> [ <var>msdosdirectories</var><small class="dots">...</small> ]
</pre>
   <p><code>Mrd</code> removes a directory from an MS-DOS file system. An error occurs
if the directory does not exist or is not empty.

<div class="node">
<a name="mren"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mshortname">mshortname</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mrd">mrd</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.22 Mren</h3>

<p><a name="index-mren-218"></a><a name="index-Renaming-files-_0028mren_0029-219"></a><a name="index-Moving-files-_0028mren_0029-220"></a>
The <code>mren</code> command is used to rename or move an existing MS-DOS
file or subdirectory. Its syntax is:

<pre class="display">     <code>mren</code> [<code>-voOsSrRA</code>] <var>sourcefile</var> <var>targetfile</var>
</pre>
   <p><code>Mren</code>
renames an existing file on an MS-DOS file system.

   <p>In verbose mode, <code>Mren</code> displays the new filename if the name
supplied is invalid.

   <p>If the first syntax is used (only one source file), and if the target
name doesn't contain any slashes or colons, the file (or subdirectory)
is renamed in the same directory, instead of being moved to the current
<code>mcd</code> directory as would be the case with <code>mmove</code>. Unlike the
MS-DOS version of <code>REN</code>, <code>mren</code> can be used to rename
directories.

<div class="node">
<a name="mshortname"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mshowfat">mshowfat</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mren">mren</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.23 Mshortname</h3>

<p><a name="index-mshortname-221"></a>
The <code>mshortname</code> command is used to display the short name of a
file.  Syntax:

<pre class="display">     <code>mshortname</code> <var>files</var>
</pre>
   <p>The shortname is displayed as it is stored in raw format on disk,
without any character set conversion.

<div class="node">
<a name="mshowfat"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mtoolstest">mtoolstest</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mshortname">mshortname</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.24 Mshowfat</h3>

<p><a name="index-mshowfat-222"></a><a name="index-Clusters-of-a-file-223"></a><a name="index-Fat-224"></a>
The <code>mshowfat</code> command is used to display the FAT entries for a
file.  Syntax:

<pre class="display">     <code>mshowfat</code> [<code>-o</code> <var>offset</var>] <var>files</var>
</pre>
   <p>If no offset is given, a list of all clusters occupied by the file is
printed. If an offset is given, only the number of the cluster
containing that offset is printed.

<div class="node">
<a name="mtoolstest"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mtype">mtype</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mshowfat">mshowfat</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.25 Mtoolstest</h3>

<p><a name="index-mtoolstest-225"></a><a name="index-Testing-configuration-file-for-correctness-226"></a><a name="index-Checking-configuration-file-227"></a><a name="index-Verifying-configuration-file-228"></a>
The <code>mtoolstest</code> command is used to tests the mtools configuration
files. To invoke it, just type <code>mtoolstest</code> without any arguments. 
<code>Mtoolstest</code> reads the mtools configuration files, and prints the
cumulative configuration to <code>stdout</code>. The output can be used as a
configuration file itself (although you might want to remove redundant
clauses).  You may use this program to convert old-style configuration
files into new style configuration files.

<div class="node">
<a name="mtype"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#mzip">mzip</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mtoolstest">mtoolstest</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.26 Mtype</h3>

<p>The <code>mtype</code> command is used to display contents of an MS-DOS
file. Its syntax is:

<pre class="display">     <code>mtype</code> [<code>-ts</code>] <var>msdosfile</var> [ <var>msdosfiles</var><small class="dots">...</small> ]
</pre>
   <p><code>Mtype</code> displays the specified MS-DOS file on the screen.

   <p>In addition to the standard options, <code>Mtype</code> allows the following
command line options:

     <dl>
<dt><code>t</code><dd>Text file viewing.  <code>Mtype</code> translates incoming carriage
return/line feeds to line feeds. 
<br><dt><code>s</code><dd><code>Mtype</code> strips the high bit from the data. 
</dl>

   <p>The <code>mcd</code> command may be used to establish the device and the
current working directory (relative to MS-DOS), otherwise the default is
<code>A:/</code>.

   <p><code>Mtype</code> returns 0 on success, 1 on utter failure, or 2 on partial
failure.

   <p>Unlike the MS-DOS version of <code>TYPE</code>, <code>mtype</code> allows multiple
arguments.

<div class="node">
<a name="mzip"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#mtype">mtype</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Commands">Commands</a>

</div>

<h3 class="section">4.27 Mzip</h3>

<p><a name="index-Zip-disk-_0028utilities_0029-229"></a><a name="index-Jaz-disk-_0028utilities_0029-230"></a><a name="index-Ejecting-a-Zip_002fJaz-disk-231"></a><a name="index-Write-protecting-a-Zip_002fJaz-disk-232"></a><a name="index-mzip-233"></a><a name="index-ZipTools-disk-234"></a><a name="index-Tools-disk-_0028Zip-and-Jaz-drives_0029-235"></a><a name="index-APlaceForYourStuff-236"></a><a name="index-password-protected-Zip-disks-237"></a>
The <code>mzip</code> command is used to issue ZIP disk specific commands on
Linux, Solaris or HP-UX. Its syntax is:

<pre class="display">     <code>mzip</code> [<code>-epqrwx</code>]
</pre>
   <p><code>Mzip</code> allows the following
command line options:

     <dl>
<dt><code>e</code><dd>Ejects the disk. 
<br><dt><code>f</code><dd>Force eject even if the disk is mounted (must be given in addition to
<code>-e</code>). 
<br><dt><code>r</code><dd>Write protect the disk. 
<br><dt><code>w</code><dd>Remove write protection. 
<br><dt><code>p</code><dd>Password write protect. 
<br><dt><code>x</code><dd>Password protect
<br><dt><code>u</code><dd>Temporarily unprotect the disk until it is ejected.  The disk becomes
writable, and reverts back to its old state when ejected. 
<br><dt><code>q</code><dd>Queries the status
</dl>

   <p>To remove the password, set it to one of the password-less modes
<code>-r</code> or <code>-w</code>: mzip will then ask you for the password, and
unlock the disk.  If you have forgotten the password, you can get rid of
it by low-level formatting the disk (using your SCSI adapter's BIOS
setup).

   <p>The ZipTools disk shipped with the drive is also password protected.  On
MS-DOS or on a Mac, this password is automatically removed once the
ZipTools have been installed.  From various articles posted to Usenet, I
learned that the password for the tools disk is
<code>APlaceForYourStuff</code><a rel="footnote" href="#fn-1" name="fnd-1"><sup>1</sup></a>.  Mzip knows about this
password, and tries it first, before prompting you for a password.  Thus
<code>mzip -w z:</code> unlocks the tools disk<a rel="footnote" href="#fn-2" name="fnd-2"><sup>2</sup></a>.  The tools disk is
formatted in a special way so as to be usable both in a PC and in a Mac. 
On a PC, the Mac file system appears as a hidden file named
<samp><span class="file">partishn.mac</span></samp>.  You may erase it to reclaim the 50 Megs of space
taken up by the Mac file system.

<h4 class="subsection">4.27.1 Bugs</h4>

<p>This command is a big kludge.  A proper implementation would take a
rework of significant parts of mtools, but unfortunately I don't have
the time for this right now. The main downside of this implementation is
that it is inefficient on some architectures (several successive calls
to mtools, which defeats mtools' caching).

<div class="node">
<a name="Compiling-mtools"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Porting-mtools">Porting mtools</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Commands">Commands</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">5 Architecture specific compilation flags</h2>

<p><a name="index-XDF-disks-_0028compile-time-configuration_0029-238"></a><a name="index-Solaris-_0028compile-time-configuration-of-vold_0029-239"></a><a name="index-Vold-_0028compile-time-configuration_0029-240"></a><a name="index-Compile-time-configuration-241"></a>
To compile mtools, first invoke <code>./configure</code> before
<code>make</code>. In addition to the standard <code>autoconfigure</code> flags,
there are two architecture specific flags available.

     <dl>
<dt><code>./configure --enable-xdf</code><dt><code>./configure --disable-xdf</code><dd>Enables support for XDF disks. This is on by default. See <a href="#XDF">XDF</a>,
for details. 
<br><dt><code>./configure --enable-vold</code><dt><code>./configure --disable-vold</code><dd>Enables support for vold on Solaris. When used in conjunction with vold,
mtools should use different device nodes than for direct access.

     <br><dt><code>./configure --enable-new-vold</code><dt><code>./configure --disable-new-vold</code><dd>Enables new support for vold on Solaris. This is supposed to work more
smoothly than the old support.

     <br><dt><code>./configure --enable-floppyd</code><dt><code>./configure --disable-floppyd</code><dd>Enables support for floppyd.  By default, floppyd support is enabled as
long as the necessary X includes and libraries are available. 
</dl>

<div class="node">
<a name="Porting-mtools"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Command-Index">Command Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Compiling-mtools">Compiling mtools</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="chapter">6 Porting mtools to architectures which are not supported yet</h2>

<p><a name="index-Porting-242"></a><a name="index-Compiled_002din-defaults-243"></a>
 This chapter is only interesting for those who want to port mtools to
an architecture which is not yet supported. For most common systems,
default drives are already defined. If you want to add default drives
for a still unsupported system, run configuration.guess, to see which
identification autoconf uses for that system. This identification is
of the form cpu-vendor-os (for example sparc-sun-sunos). The cpu and
the OS parts are passed to the compiler as preprocessor flags. 
 The OS part is passed to the compiler in three forms.
     <ol type=1 start=1>
<li>The complete OS name, with dots replaced by underscores.  SCO3.2v2 would
yield sco3_2v2
<li>The base OS name. SCO3.2v2 would yield Sco
<li>The base OS name plus its major version. SCO3.2v2 would yield Sco3
        </ol>

   <p>All three versions are passed, if they are different.

   <p>To define the devices, use the entries for the systems that are already
present as templates. In general, they have the following form:

<pre class="example">     #if (defined (my_cpu) &amp;&amp; defined(my_os))
     #define predefined_devices
     struct device devices[] = {
             { "/dev/first_drive", 'drive_letter', drive_description},
             ...
             { "/dev/last_drive", 'drive_letter', drive_description}
     }
     #define INIT_NOOP
     #endif
</pre>
   <p>"/dev/first_drive" is the name of the device or image file
representing the drive. Drive_letter is a letter ranging from a to z
giving access to the drive. Drive_description describes the type of the
drive:
     <dl>
<dt><code>ED312</code><dd>extra density (2.88M) 3 1/2 disk
<br><dt><code>HD312</code><dd>high density 3 1/2 disk
<br><dt><code>DD312</code><dd>double density 3 1/2 disk
<br><dt><code>HD514</code><dd>high density 5 1/4 disk
<br><dt><code>DD514</code><dd>double density 5 1/4 disk
<br><dt><code>DDsmall</code><dd>8 sector double density 5 1/4 disk
<br><dt><code>SS514</code><dd>single sided double density 5 1/4 disk
<br><dt><code>SSsmall</code><dd>single sided 8 sector double density 5 1/4 disk
<br><dt><code>GENFD</code><dd>generic floppy drive (12 bit FAT)
<br><dt><code>GENHD</code><dd>generic hard disk (16 bit FAT)
<br><dt><code>GEN</code><dd>generic device (all parameters match)
<br><dt><code>ZIPJAZ(flags)</code><dd>generic ZIP drive using normal access. This uses partition 4. 
<code>Flags</code> are any special flags to be passed to open. 
<br><dt><code>RZIPJAZ(flags)</code><dd>generic ZIP drive using raw SCSI access. This uses partition 4. 
<code>Flags</code> are any special flags to be passed to open. 
<br><dt><code>REMOTE</code><dd>the remote drive used for floppyd.  Unlike the other items, this macro
also includes the file name ($DISPLAY) and the drive letter (X)
</dl>

   <p>Entries may be described in more detail:
<pre class="example">      fat_bits,open_flags,cylinders,heads,sectors,DEF_ARG
</pre>
   <p>or, if you need to describe an offset (file system doesn't start at
beginning of file system)
<pre class="example">      fat_bits, open_flags, cylinders, heads, sectors, offset, DEF_ARG0
</pre>
     <dl>
<dt><code>fat_bits</code><dd>is either 12, 16 or 0. 0 means that the device accepts both types of
FAT. 
<br><dt><code>open_flags</code><dd>may include flags such as O_NDELAY, or O_RDONLY, which might be
necessary to open the device. 0 means no special flags are needed. 
<br><dt><code>cylinders,heads,sectors</code><dd>describe the geometry of the disk. If cylinders is 0, the heads and sectors
parameters are ignored, and the drive accepts any geometry. 
<br><dt><code>offset</code><dd>is used if the DOS file system doesn't begin at the start of the device
or image file. This is mostly useful for Atari Ram disks (which contain
their device driver at the beginning of the file) or for DOS emulator
images (which may represent a partitioned device. 
</dl>

   <p>Definition of defaults in the devices file should only be done if these
same devices are found on a large number of hosts of this type. In that
case, could you also let me know about your new definitions, so that I
can include them into the next release.  For purely local file, I
recommend that you use the <code>/etc/mtools.conf</code> and
<code>~/.mtoolsrc</code> configuration files.

   <p>However, the devices files also allows to supply geometry setting
routines. These are necessary if you want to access high capacity
disks.

   <p>Two routines should be supplied:

     <ol type=1 start=1>
<li>Reading the current parameters
     <pre class="example">          static inline int get_parameters(int fd, struct generic_floppy_struct *floppy)
</pre>
     <p>This probes the current configured geometry, and return it in
the structure generic_floppy_struct (which must also be declared). 
 Fd is an open file descriptor for the device, and buf is an already
filled in stat structure, which may be useful. 
 This routine should return 1 if the probing fails, and 0 otherwise.

     <li>Setting new parameters
     <pre class="example">          static inline int set_parameters(int fd, struct generic_floppy_struct *floppy)
                                           struct stat *buf)
</pre>
     <p>This configures the geometry contained in floppy on the file descriptor
fd. Buf is the result of a stat call (already filled in).  This should
return 1 if the new geometry cannot be configured, and 0 otherwise.
        </ol>

   <p>A certain number of preprocessor macros should also be supplied:

     <dl>
<dt><code>TRACKS(floppy)</code><dd>refers to the track field in the floppy structure
<br><dt><code>HEADS(floppy)</code><dd>refers to the heads field in the floppy structure
<br><dt><code>SECTORS(floppy)</code><dd>refers to the sectors per track field in the floppy structure
<br><dt><code>SECTORS_PER_DISK(floppy)</code><dd>refers to the sectors per disk field in the floppy structure (if
applicable, otherwise leave undefined)

     <br><dt><code>BLOCK_MAJOR</code><dd>major number of the floppy device, when viewed as a block device

     <br><dt><code>CHAR_MAJOR</code><dd>major number of the floppy device, when viewed as a character device
(a.k.a. "raw" device, used for fsck) (leave this undefined, if your OS
doesn't have raw devices)
</dl>

   <p>For the truly high capacity formats (XDF, 2m, etc), there is no clean
and documented interface yet.

<!-- MANskip 1 -->
<div class="node">
<a name="Command-Index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Variable-Index">Variable Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Porting-mtools">Porting mtools</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Command Index</h2>

<ul class="index-pg" compact>
   </ul><div class="node">
<a name="Variable-Index"></a>
<p><hr>
Next:&nbsp;<a rel="next" accesskey="n" href="#Concept-Index">Concept Index</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Command-Index">Command Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Variable index</h2>



<ul class="index-vr" compact>
<li><a href="#index-cylinders-84"><code>cylinders</code></a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-drive-60"><code>drive</code></a>: <a href="#general-information">general information</a></li>
<li><a href="#index-exclusive-90"><code>exclusive</code></a>: <a href="#open-flags">open flags</a></li>
<li><a href="#index-fat_005fbits-94"><code>fat_bits</code></a>: <a href="#miscellaneous-variables">miscellaneous variables</a></li>
<li><a href="#index-file-65"><code>file</code></a>: <a href="#location-information">location information</a></li>
<li><a href="#index-filter-119"><code>filter</code></a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-heads-86"><code>heads</code></a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-mformat_005fonly-118"><code>mformat_only</code></a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-MTOOLS_005fFAT_005fCOMPATIBILITY-52"><code>MTOOLS_FAT_COMPATIBILITY</code></a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-MTOOLS_005fLOWER_005fCASE-53"><code>MTOOLS_LOWER_CASE</code></a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-MTOOLS_005fNO_005fVFAT-54"><code>MTOOLS_NO_VFAT</code></a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-MTOOLS_005fSKIP_005fCHECK-51"><code>MTOOLS_SKIP_CHECK</code></a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-MTOOLSRC-39"><code>MTOOLSRC</code></a>: <a href="#Configuration">Configuration</a></li>
<li><a href="#index-nodelay-89"><code>nodelay</code></a>: <a href="#open-flags">open flags</a></li>
<li><a href="#index-sectors-87"><code>sectors</code></a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-sync-88"><code>sync</code></a>: <a href="#open-flags">open flags</a></li>
<li><a href="#index-tracks-85"><code>tracks</code></a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-use_005fxdf-117"><code>use_xdf</code></a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
   </ul><div class="node">
<a name="Concept-Index"></a>
<p><hr>
Previous:&nbsp;<a rel="previous" accesskey="p" href="#Variable-Index">Variable Index</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="#Top">Top</a>

</div>

<h2 class="unnumbered">Concept index</h2>



<ul class="index-cp" compact>
<li><a href="#index-g_t2m-35">2m</a>: <a href="#g_t2m">2m</a></li>
<li><a href="#index-ALPHA-patches-2">ALPHA patches</a>: <a href="#Location">Location</a></li>
<li><a href="#index-APlaceForYourStuff-236">APlaceForYourStuff</a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-Archive-bit-141">Archive bit</a>: <a href="#mattrib">mattrib</a></li>
<li><a href="#index-Atari-114">Atari</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Atari-Ram-disk-76">Atari Ram disk</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Backwards-compatibility-125">Backwards compatibility</a>: <a href="#old-style-configuration">old style configuration</a></li>
<li><a href="#index-Bad-blocks-144">Bad blocks</a>: <a href="#mbadblocks">mbadblocks</a></li>
<li><a href="#index-bigger-sectors-34">bigger sectors</a>: <a href="#bigger-sectors">bigger sectors</a></li>
<li><a href="#index-blocksize-99">blocksize</a>: <a href="#miscellaneous-variables">miscellaneous variables</a></li>
<li><a href="#index-bugs-1">bugs</a>: <a href="#Location">Location</a></li>
<li><a href="#index-Case-sensitivity-23">Case sensitivity</a>: <a href="#case-sensitivity">case sensitivity</a></li>
<li><a href="#index-Changing-file-attributes-137">Changing file attributes</a>: <a href="#mattrib">mattrib</a></li>
<li><a href="#index-character-devices-98">character devices</a>: <a href="#miscellaneous-variables">miscellaneous variables</a></li>
<li><a href="#index-Checking-configuration-file-227">Checking configuration file</a>: <a href="#mtoolstest">mtoolstest</a></li>
<li><a href="#index-Clusters-of-a-file-223">Clusters of a file</a>: <a href="#mshowfat">mshowfat</a></li>
<li><a href="#index-Command-list-128">Command list</a>: <a href="#Commands">Commands</a></li>
<li><a href="#index-Compile-time-configuration-241">Compile time configuration</a>: <a href="#Compiling-mtools">Compiling mtools</a></li>
<li><a href="#index-Compiled_002din-defaults-243">Compiled-in defaults</a>: <a href="#Porting-mtools">Porting mtools</a></li>
<li><a href="#index-Concatenating-MS_002dDOS-files-163">Concatenating MS-DOS files</a>: <a href="#mcopy">mcopy</a></li>
<li><a href="#index-Configuration-file-47">Configuration file</a>: <a href="#default-values">default values</a></li>
<li><a href="#index-Configuration-file-name-40">Configuration file name</a>: <a href="#configuration-file-location">configuration file location</a></li>
<li><a href="#index-Configuration-file-name-_0028parsing-order_0029-122">Configuration file name (parsing order)</a>: <a href="#parsing-order">parsing order</a></li>
<li><a href="#index-Configuration-file-parsing-order-121">Configuration file parsing order</a>: <a href="#parsing-order">parsing order</a></li>
<li><a href="#index-Configuration-file-syntax-44">Configuration file syntax</a>: <a href="#general-syntax">general syntax</a></li>
<li><a href="#index-Configuration-file_002c-old-syntax-127">Configuration file, old syntax</a>: <a href="#old-style-configuration">old style configuration</a></li>
<li><a href="#index-Configuration-files-38">Configuration files</a>: <a href="#Configuration">Configuration</a></li>
<li><a href="#index-Configuration-of-disk-geometry-78">Configuration of disk geometry</a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-Copying-an-entire-disk-image-147">Copying an entire disk image</a>: <a href="#mcat">mcat</a></li>
<li><a href="#index-Copying-MS_002dDOS-files-162">Copying MS-DOS files</a>: <a href="#mcopy">mcopy</a></li>
<li><a href="#index-CR_002fLF-conversions-165">CR/LF conversions</a>: <a href="#mcopy">mcopy</a></li>
<li><a href="#index-Creating-a-directory-198">Creating a directory</a>: <a href="#mmd">mmd</a></li>
<li><a href="#index-Current-working-directory-11">Current working directory</a>: <a href="#directory">directory</a></li>
<li><a href="#index-Current-working-directory-_0028changing-the_0029-153">Current working directory (changing the)</a>: <a href="#mcd">mcd</a></li>
<li><a href="#index-Default-configuration-46">Default configuration</a>: <a href="#default-values">default values</a></li>
<li><a href="#index-Default-directory-12">Default directory</a>: <a href="#directory">directory</a></li>
<li><a href="#index-Default-directory-_0028changing-the_0029-154">Default directory (changing the)</a>: <a href="#mcd">mcd</a></li>
<li><a href="#index-Default-values-45">Default values</a>: <a href="#default-values">default values</a></li>
<li><a href="#index-Deleting-a-directory-215">Deleting a directory</a>: <a href="#mrd">mrd</a></li>
<li><a href="#index-deleting-an-MS_002dDOS-directory-recursively-173">deleting an MS-DOS directory recursively</a>: <a href="#mdeltree">mdeltree</a></li>
<li><a href="#index-deleting-MS_002dDOS-files-169">deleting MS-DOS files</a>: <a href="#mdel">mdel</a></li>
<li><a href="#index-Description-of-disk-geometry-79">Description of disk geometry</a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-diffs-4">diffs</a>: <a href="#Location">Location</a></li>
<li><a href="#index-Directory-9">Directory</a>: <a href="#directory">directory</a></li>
<li><a href="#index-Directory-_0028changing_0029-151">Directory (changing)</a>: <a href="#mcd">mcd</a></li>
<li><a href="#index-Directory-creation-199">Directory creation</a>: <a href="#mmd">mmd</a></li>
<li><a href="#index-Directory-listing-178">Directory listing</a>: <a href="#mdir">mdir</a></li>
<li><a href="#index-Directory-removing-216">Directory removing</a>: <a href="#mrd">mrd</a></li>
<li><a href="#index-disable-locking-100">disable locking</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Disk-Geometry-77">Disk Geometry</a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-Disk-image-148">Disk image</a>: <a href="#mcat">mcat</a></li>
<li><a href="#index-Disk-label-195">Disk label</a>: <a href="#mlabel">mlabel</a></li>
<li><a href="#index-DMF-disks-32">DMF disks</a>: <a href="#more-sectors">more sectors</a></li>
<li><a href="#index-DOSEMU-hard-disk-image-66">DOSEMU hard disk image</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Drive-configuration-57">Drive configuration</a>: <a href="#per-drive-variables">per drive variables</a></li>
<li><a href="#index-Drive-configuration_002c-example-59">Drive configuration, example</a>: <a href="#general-information">general information</a></li>
<li><a href="#index-Drive-description-56">Drive description</a>: <a href="#per-drive-variables">per drive variables</a></li>
<li><a href="#index-Drive-description_002c-example-58">Drive description, example</a>: <a href="#general-information">general information</a></li>
<li><a href="#index-Drive-independent-configuration-variables-49">Drive independent configuration variables</a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-du-181">du</a>: <a href="#mdu">mdu</a></li>
<li><a href="#index-Duplicate-file-names-19">Duplicate file names</a>: <a href="#name-clashes">name clashes</a></li>
<li><a href="#index-Ejecting-a-Zip_002fJaz-disk-231">Ejecting a Zip/Jaz disk</a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-Environmental-variables-50">Environmental variables</a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-Erasing-a-directory-214">Erasing a directory</a>: <a href="#mrd">mrd</a></li>
<li><a href="#index-erasing-an-MS_002dDOS-directory-recursively-172">erasing an MS-DOS directory recursively</a>: <a href="#mdeltree">mdeltree</a></li>
<li><a href="#index-erasing-MS_002dDOS-files-168">erasing MS-DOS files</a>: <a href="#mdel">mdel</a></li>
<li><a href="#index-exclusive-access-to-a-drive-93">exclusive access to a drive</a>: <a href="#open-flags">open flags</a></li>
<li><a href="#index-Executing-commands-before-opening-the-device-96">Executing commands before opening the device</a>: <a href="#miscellaneous-variables">miscellaneous variables</a></li>
<li><a href="#index-Fat-224">Fat</a>: <a href="#mshowfat">mshowfat</a></li>
<li><a href="#index-fdformat-30">fdformat</a>: <a href="#more-sectors">more sectors</a></li>
<li><a href="#index-File-name-of-device-node-64">File name of device node</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-File-system-creation-187">File system creation</a>: <a href="#mformat">mformat</a></li>
<li><a href="#index-Filenames-6">Filenames</a>: <a href="#arguments">arguments</a></li>
<li><a href="#index-floppyd-130"><code>floppyd</code></a>: <a href="#floppyd">floppyd</a></li>
<li><a href="#index-Floppyd-cat-149">Floppyd cat</a>: <a href="#mcat">mcat</a></li>
<li><a href="#index-floppyd_005finstalltest-133"><code>floppyd_installtest</code></a>: <a href="#floppyd_005finstalltest">floppyd_installtest</a></li>
<li><a href="#index-Format-of-disk-80">Format of disk</a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-Formats_002c-high-capacity-28">Formats, high capacity</a>: <a href="#high-capacity-formats">high capacity formats</a></li>
<li><a href="#index-Formatting-disks-186">Formatting disks</a>: <a href="#mformat">mformat</a></li>
<li><a href="#index-FreeDOS-55">FreeDOS</a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-getting-parameters-of-a-MS_002dDOS-file-system-192">getting parameters of a MS-DOS file system</a>: <a href="#minfo">minfo</a></li>
<li><a href="#index-Global-configuration-variables-48">Global configuration variables</a>: <a href="#global-variables">global variables</a></li>
<li><a href="#index-Hdimage-61">Hdimage</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Hidden-files-138">Hidden files</a>: <a href="#mattrib">mattrib</a></li>
<li><a href="#index-High-capacity-formats-25">High capacity formats</a>: <a href="#high-capacity-formats">high capacity formats</a></li>
<li><a href="#index-High-capacity-formats_002c-mounting-204">High capacity formats, mounting</a>: <a href="#mmount">mmount</a></li>
<li><a href="#index-High-density-disk-81">High density disk</a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-Image-file-62">Image file</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Initializing-disks-185">Initializing disks</a>: <a href="#mformat">mformat</a></li>
<li><a href="#index-Jaz-disk-_0028utilities_0029-230">Jaz disk (utilities)</a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-Jaz-disks-_0028partitioning-them_0029-211">Jaz disks (partitioning them)</a>: <a href="#mpartition">mpartition</a></li>
<li><a href="#index-Jaz-disks-_0028partitions_0029-68">Jaz disks (partitions)</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Jaz-disks-_0028raw-SCSI-access_0029-107">Jaz disks (raw SCSI access)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Labeling-a-disk-194">Labeling a disk</a>: <a href="#mlabel">mlabel</a></li>
<li><a href="#index-Linux-enhancements-_0028High-Capacity-Formats_0029-29">Linux enhancements (High Capacity Formats)</a>: <a href="#high-capacity-formats">high capacity formats</a></li>
<li><a href="#index-Linux-enhancements-_0028mmount_0029-202">Linux enhancements (mmount)</a>: <a href="#mmount">mmount</a></li>
<li><a href="#index-List-of-available-commands-129">List of available commands</a>: <a href="#Commands">Commands</a></li>
<li><a href="#index-Listing-a-directory-177">Listing a directory</a>: <a href="#mdir">mdir</a></li>
<li><a href="#index-Listing-space-occupied-by-directories-and-files-182">Listing space occupied by directories and files</a>: <a href="#mdu">mdu</a></li>
<li><a href="#index-Location-of-configuration-files-42">Location of configuration files</a>: <a href="#configuration-file-location">configuration file location</a></li>
<li><a href="#index-Location-of-configuration-files-_0028parsing-order_0029-124">Location of configuration files (parsing order)</a>: <a href="#parsing-order">parsing order</a></li>
<li><a href="#index-locking-_0028disabling-it_0029-101">locking (disabling it)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Long-file-name-13">Long file name</a>: <a href="#long-names">long names</a></li>
<li><a href="#index-Low-density-disk-82">Low density disk</a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-Magneto_002doptical-disks-70">Magneto-optical disks</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-mailing-list-5">mailing list</a>: <a href="#Location">Location</a></li>
<li><a href="#index-Making-a-directory-197">Making a directory</a>: <a href="#mmd">mmd</a></li>
<li><a href="#index-Marking-blocks-as-bad-143">Marking blocks as bad</a>: <a href="#mbadblocks">mbadblocks</a></li>
<li><a href="#index-mattrib-136"><code>mattrib</code></a>: <a href="#mattrib">mattrib</a></li>
<li><a href="#index-mbadblocks-142"><code>mbadblocks</code></a>: <a href="#mbadblocks">mbadblocks</a></li>
<li><a href="#index-mcat-146"><code>mcat</code></a>: <a href="#mcat">mcat</a></li>
<li><a href="#index-mcd-150"><code>mcd</code></a>: <a href="#mcd">mcd</a></li>
<li><a href="#index-mcd-_0028introduction_0029-8"><code>mcd (introduction)</code></a>: <a href="#directory">directory</a></li>
<li><a href="#index-mclasserase-156"><code>mclasserase</code></a>: <a href="#mclasserase">mclasserase</a></li>
<li><a href="#index-mcopy-159"><code>mcopy</code></a>: <a href="#mcopy">mcopy</a></li>
<li><a href="#index-Mcwd-file-155">Mcwd file</a>: <a href="#mcd">mcd</a></li>
<li><a href="#index-mdel-166"><code>mdel</code></a>: <a href="#mdel">mdel</a></li>
<li><a href="#index-mdeltree-170"><code>mdeltree</code></a>: <a href="#mdeltree">mdeltree</a></li>
<li><a href="#index-mdir-175"><code>mdir</code></a>: <a href="#mdir">mdir</a></li>
<li><a href="#index-mdu-179"><code>mdu</code></a>: <a href="#mdu">mdu</a></li>
<li><a href="#index-Memory-Card-157">Memory Card</a>: <a href="#mclasserase">mclasserase</a></li>
<li><a href="#index-mformat-184"><code>mformat</code></a>: <a href="#mformat">mformat</a></li>
<li><a href="#index-mformat-_0028geometry-used-for_0029-83"><code>mformat (geometry used for)</code></a>: <a href="#geometry-description">geometry description</a></li>
<li><a href="#index-mformat-parameters-191">mformat parameters</a>: <a href="#minfo">minfo</a></li>
<li><a href="#index-minfo-190"><code>minfo</code></a>: <a href="#minfo">minfo</a></li>
<li><a href="#index-mkmanifest-188"><code>mkmanifest</code></a>: <a href="#mkmanifest">mkmanifest</a></li>
<li><a href="#index-mlabel-193"><code>mlabel</code></a>: <a href="#mlabel">mlabel</a></li>
<li><a href="#index-mmd-196"><code>mmd</code></a>: <a href="#mmd">mmd</a></li>
<li><a href="#index-mmount-201"><code>mmount</code></a>: <a href="#mmount">mmount</a></li>
<li><a href="#index-mmove-205"><code>mmove</code></a>: <a href="#mmove">mmove</a></li>
<li><a href="#index-Mounting-a-disk-203">Mounting a disk</a>: <a href="#mmount">mmount</a></li>
<li><a href="#index-Moving-files-_0028mmove_0029-206">Moving files (mmove)</a>: <a href="#mmove">mmove</a></li>
<li><a href="#index-Moving-files-_0028mren_0029-220">Moving files (mren)</a>: <a href="#mren">mren</a></li>
<li><a href="#index-mpartition-208"><code>mpartition</code></a>: <a href="#mpartition">mpartition</a></li>
<li><a href="#index-mrd-212"><code>mrd</code></a>: <a href="#mrd">mrd</a></li>
<li><a href="#index-mren-218"><code>mren</code></a>: <a href="#mren">mren</a></li>
<li><a href="#index-mshortname-221"><code>mshortname</code></a>: <a href="#mshortname">mshortname</a></li>
<li><a href="#index-mshowfat-222"><code>mshowfat</code></a>: <a href="#mshowfat">mshowfat</a></li>
<li><a href="#index-mtoolstest-225"><code>mtoolstest</code></a>: <a href="#mtoolstest">mtoolstest</a></li>
<li><a href="#index-mzip-233"><code>mzip</code></a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-Name-clashes-18">Name clashes</a>: <a href="#name-clashes">name clashes</a></li>
<li><a href="#index-Name-of-configuration-files-41">Name of configuration files</a>: <a href="#configuration-file-location">configuration file location</a></li>
<li><a href="#index-Name-of-configuration-files-_0028parsing-order_0029-123">Name of configuration files (parsing order)</a>: <a href="#parsing-order">parsing order</a></li>
<li><a href="#index-Name-of-device-node-63">Name of device node</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Occupation-of-space-by-directories-and-files-183">Occupation of space by directories and files</a>: <a href="#mdu">mdu</a></li>
<li><a href="#index-Odd-formats-26">Odd formats</a>: <a href="#high-capacity-formats">high capacity formats</a></li>
<li><a href="#index-Old-configuration-file-syntax-126">Old configuration file syntax</a>: <a href="#old-style-configuration">old style configuration</a></li>
<li><a href="#index-open-flags-91">open flags</a>: <a href="#open-flags">open flags</a></li>
<li><a href="#index-Options-7">Options</a>: <a href="#arguments">arguments</a></li>
<li><a href="#index-OS_002f2-_0028layout-of-removable-media_0029-71">OS/2 (layout of removable media)</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-OS_002f2-_0028XDF-disks_0029-37">OS/2 (XDF disks)</a>: <a href="#XDF">XDF</a></li>
<li><a href="#index-Overwriting-files-20">Overwriting files</a>: <a href="#name-clashes">name clashes</a></li>
<li><a href="#index-packing-list-189">packing list</a>: <a href="#mkmanifest">mkmanifest</a></li>
<li><a href="#index-Parsing-order-120">Parsing order</a>: <a href="#parsing-order">parsing order</a></li>
<li><a href="#index-Partitioned-image-file-74">Partitioned image file</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-partitions-_0028creating_0029-209">partitions (creating)</a>: <a href="#mpartition">mpartition</a></li>
<li><a href="#index-password-protected-Zip-disks-237">password protected Zip disks</a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-patches-3">patches</a>: <a href="#Location">Location</a></li>
<li><a href="#index-Physically-erase-158">Physically erase</a>: <a href="#mclasserase">mclasserase</a></li>
<li><a href="#index-plain-floppy_003a-device-xxx-busy-102">plain floppy: device xxx busy</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Porting-242">Porting</a>: <a href="#Porting-mtools">Porting mtools</a></li>
<li><a href="#index-Primary-file-name-_0028long-names_0029-16">Primary file name (long names)</a>: <a href="#long-names">long names</a></li>
<li><a href="#index-Primary-file-name-_0028name-clashes_0029-21">Primary file name (name clashes)</a>: <a href="#name-clashes">name clashes</a></li>
<li><a href="#index-Ram-disk-75">Ram disk</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-raw-device-97">raw device</a>: <a href="#miscellaneous-variables">miscellaneous variables</a></li>
<li><a href="#index-Read-errors-145">Read errors</a>: <a href="#mbadblocks">mbadblocks</a></li>
<li><a href="#index-Read_002donly-files-_0028changing-the-attribute_0029-139">Read-only files (changing the attribute)</a>: <a href="#mattrib">mattrib</a></li>
<li><a href="#index-Read_002donly-files-_0028listing-them_0029-176">Read-only files (listing them)</a>: <a href="#mdir">mdir</a></li>
<li><a href="#index-Reading-MS_002dDOS-files-160">Reading MS-DOS files</a>: <a href="#mcopy">mcopy</a></li>
<li><a href="#index-recursively-removing-an-MS_002dDOS-directory-174">recursively removing an MS-DOS directory</a>: <a href="#mdeltree">mdeltree</a></li>
<li><a href="#index-remote-floppy-access-135">remote floppy access</a>: <a href="#floppyd_005finstalltest">floppyd_installtest</a></li>
<li><a href="#index-remote-floppy-access-132">remote floppy access</a>: <a href="#floppyd">floppyd</a></li>
<li><a href="#index-Removable-media-73">Removable media</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Removing-a-directory-213">Removing a directory</a>: <a href="#mrd">mrd</a></li>
<li><a href="#index-removing-an-MS_002dDOS-directory-recursively-171">removing an MS-DOS directory recursively</a>: <a href="#mdeltree">mdeltree</a></li>
<li><a href="#index-removing-MS_002dDOS-files-167">removing MS-DOS files</a>: <a href="#mdel">mdel</a></li>
<li><a href="#index-Renaming-files-_0028mmove_0029-207">Renaming files (mmove)</a>: <a href="#mmove">mmove</a></li>
<li><a href="#index-Renaming-files-_0028mren_0029-219">Renaming files (mren)</a>: <a href="#mren">mren</a></li>
<li><a href="#index-SCSI-devices-109">SCSI devices</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Secondary-file-name-_0028long-names_0029-17">Secondary file name (long names)</a>: <a href="#long-names">long names</a></li>
<li><a href="#index-Secondary-file-name-_0028name-clashes_0029-22">Secondary file name (name clashes)</a>: <a href="#name-clashes">name clashes</a></li>
<li><a href="#index-setgid-installation-111">setgid installation</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-setuid-installation-110">setuid installation</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-setuid-installation-_0028needed-for-raw-SCSI-I_002fO_0029-103">setuid installation (needed for raw SCSI I/O)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Solaris-_0028compile-time-configuration-of-vold_0029-239">Solaris (compile time configuration of vold)</a>: <a href="#Compiling-mtools">Compiling mtools</a></li>
<li><a href="#index-Solaris-_0028Raw-access-to-SCSI-devices-such-as-Zip-_0026-Jaz_0029-104">Solaris (Raw access to SCSI devices such as Zip &amp; Jaz)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Solaris-_0028volcheck_0029-95">Solaris (volcheck)</a>: <a href="#miscellaneous-variables">miscellaneous variables</a></li>
<li><a href="#index-Solaris-_0028vold_0029-112">Solaris (vold)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Space-occupied-by-directories-and-files-180">Space occupied by directories and files</a>: <a href="#mdu">mdu</a></li>
<li><a href="#index-Special-formats-24">Special formats</a>: <a href="#high-capacity-formats">high capacity formats</a></li>
<li><a href="#index-Subdirectory-creation-200">Subdirectory creation</a>: <a href="#mmd">mmd</a></li>
<li><a href="#index-Subdirectory-removing-217">Subdirectory removing</a>: <a href="#mrd">mrd</a></li>
<li><a href="#index-SunOS-_0028Raw-access-to-SCSI-devices-such-as-Zip-_0026-Jaz_0029-105">SunOS (Raw access to SCSI devices such as Zip &amp; Jaz)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-synchronous-writing-92">synchronous writing</a>: <a href="#open-flags">open flags</a></li>
<li><a href="#index-Syntax-of-the-configuration-file-43">Syntax of the configuration file</a>: <a href="#general-syntax">general syntax</a></li>
<li><a href="#index-Syquest-disks-69">Syquest disks</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Syquest-disks-_0028raw-SCSI-access_0029-108">Syquest disks (raw SCSI access)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-System-files-140">System files</a>: <a href="#mattrib">mattrib</a></li>
<li><a href="#index-Testing-configuration-file-for-correctness-226">Testing configuration file for correctness</a>: <a href="#mtoolstest">mtoolstest</a></li>
<li><a href="#index-Text-files-164">Text files</a>: <a href="#mcopy">mcopy</a></li>
<li><a href="#index-Tools-disk-_0028Zip-and-Jaz-drives_0029-235">Tools disk (Zip and Jaz drives)</a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-Verifying-configuration-file-228">Verifying configuration file</a>: <a href="#mtoolstest">mtoolstest</a></li>
<li><a href="#index-VFAT_002dstyle-file-names-15">VFAT-style file names</a>: <a href="#long-names">long names</a></li>
<li><a href="#index-vgacopy-31">vgacopy</a>: <a href="#more-sectors">more sectors</a></li>
<li><a href="#index-Vold-_0028compile-time-configuration_0029-240">Vold (compile time configuration)</a>: <a href="#Compiling-mtools">Compiling mtools</a></li>
<li><a href="#index-Vold-_0028mediamgr_0029-113">Vold (mediamgr)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Weird-formats-27">Weird formats</a>: <a href="#high-capacity-formats">high capacity formats</a></li>
<li><a href="#index-Windows-95-_0028DMF-disks_0029-33">Windows 95 (DMF disks)</a>: <a href="#more-sectors">more sectors</a></li>
<li><a href="#index-Windows-95_002dstyle-file-names-14">Windows 95-style file names</a>: <a href="#long-names">long names</a></li>
<li><a href="#index-Windows-NT-_0028layout-of-removable-media_0029-72">Windows NT (layout of removable media)</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Wordswapped-115">Wordswapped</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Working-directory-152">Working directory</a>: <a href="#mcd">mcd</a></li>
<li><a href="#index-Working-directory-10">Working directory</a>: <a href="#directory">directory</a></li>
<li><a href="#index-Write-protecting-a-Zip_002fJaz-disk-232">Write protecting a Zip/Jaz disk</a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-Writing-MS_002dDOS-files-161">Writing MS-DOS files</a>: <a href="#mcopy">mcopy</a></li>
<li><a href="#index-X-terminal-134">X terminal</a>: <a href="#floppyd_005finstalltest">floppyd_installtest</a></li>
<li><a href="#index-X-terminal-131">X terminal</a>: <a href="#floppyd">floppyd</a></li>
<li><a href="#index-XDF-disks-36">XDF disks</a>: <a href="#XDF">XDF</a></li>
<li><a href="#index-XDF-disks-_0028compile-time-configuration_0029-238">XDF disks (compile time configuration)</a>: <a href="#Compiling-mtools">Compiling mtools</a></li>
<li><a href="#index-XDF-disks-_0028how-to-configure_0029-116">XDF disks (how to configure)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-Zip-disk-_0028utilities_0029-229">Zip disk (utilities)</a>: <a href="#mzip">mzip</a></li>
<li><a href="#index-Zip-disks-_0028partitioning-them_0029-210">Zip disks (partitioning them)</a>: <a href="#mpartition">mpartition</a></li>
<li><a href="#index-Zip-disks-_0028partitions_0029-67">Zip disks (partitions)</a>: <a href="#location-information">location information</a></li>
<li><a href="#index-Zip-disks-_0028raw-SCSI-access_0029-106">Zip disks (raw SCSI access)</a>: <a href="#miscellaneous-flags">miscellaneous flags</a></li>
<li><a href="#index-ZipTools-disk-234">ZipTools disk</a>: <a href="#mzip">mzip</a></li>
   </ul><!-- MANend-skip 1 -->
<!-- MANend-skip 5 -->
<div class="footnote">
<hr>
<a name="texinfo-footnotes-in-document"></a><h4>Footnotes</h4><p class="footnote"><small>[<a name="fn-1" href="#fnd-1">1</a>]</small> To see the articles, search for
<code>APlaceForYourStuff</code> using Google Groups</p>

   <p class="footnote"><small>[<a name="fn-2" href="#fnd-2">2</a>]</small> I didn't know about
this yet when I bought my own Zip drive.  Thus I ended up reformatting
my tools disk, and hence I haven't had the opportunity to test the
password yet.  If anybody still has their tools disk with the original
password, could you try it out? Thanks in advance</p>

   <hr></div>

</body></html>

