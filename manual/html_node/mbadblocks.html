<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.3, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Mtools 4.0.20: mbadblocks</title>

<meta name="description" content="Mtools 4.0.20: mbadblocks">
<meta name="keywords" content="Mtools 4.0.20: mbadblocks">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Command-Index.html#Command-Index" rel="index" title="Command Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Commands.html#Commands" rel="up" title="Commands">
<link href="mcat.html#mcat" rel="next" title="mcat">
<link href="mattrib.html#mattrib" rel="prev" title="mattrib">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="mbadblocks"></a>
<div class="header">
<p>
Next: <a href="mcat.html#mcat" accesskey="n" rel="next">mcat</a>, Previous: <a href="mattrib.html#mattrib" accesskey="p" rel="prev">mattrib</a>, Up: <a href="Commands.html#Commands" accesskey="u" rel="up">Commands</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Command-Index.html#Command-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Mbadblocks"></a>
<h3 class="section">4.4 Mbadblocks</h3>
<a name="index-mbadblocks"></a>
<a name="index-Marking-blocks-as-bad"></a>
<a name="index-Bad-blocks"></a>
<a name="index-Read-errors"></a>

<p>The <code>mbadblocks</code> command is used to mark some clusters on an
MS-DOS filesystem bad. It has the following syntax:
</p>
<p><code>mbadblocks</code> [<code>-s</code> <var>sectorlist</var>|<code>-c</code> <var>clusterlist</var>|-w] <var>drive</var><code>:</code>
</p>
<p>If no command line flags are supplied, <code>Mbadblocks</code> scans an
MS-DOS filesystem for bad blocks by simply trying to read them and
flag them if read fails. All blocks that are unused are scanned, and
if detected bad are marked as such in the FAT.
</p>
<p>This command is intended to be used right after <code>mformat</code>.  It is
not intended to salvage data from bad disks.
</p>

<a name="Command-line-options-1"></a>
<h4 class="subsection">4.4.1 Command line options</h4>

<dl compact="compact">
<dt><code>c <var>file</var></code></dt>
<dd><p>Use a list of bad clusters, rather than scanning for bad clusters
itself.
</p></dd>
<dt><code>s <var>file</var></code></dt>
<dd><p>Use a list of bad sectors (counted from beginning of filesystem),
rather than trying for bad clusters itself.
</p></dd>
<dt><code>w</code></dt>
<dd><p>Write a random pattern to each cluster, then read it back and flag
cluster as bad if mismatch. Only free clusters are tested in such a
way, so any file data is preserved.
</p></dd>
</dl>

<a name="Bugs-1"></a>
<h4 class="subsection">4.4.2 Bugs</h4>
<p><code>Mbadblocks</code> should (but doesn&rsquo;t yet :-( ) also try to salvage bad
blocks which are in use by reading them repeatedly, and then mark them
bad.
</p>



</body>
</html>
